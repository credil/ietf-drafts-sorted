MMUSIC                                                Albrecht Schwarz
Internet Draft                                Juergen Stoetzer-Bradler
Intended status: Informational                          ALCATEL-LUCENT
Expires: December 2010                                    June 7, 2010



                   Session Description Protocol (SDP) -
         Revised Offer/Answer Protocol (SDPCapNeg & MediaCapNeg) -
                           Offer/Answer Examples
           draft-schwarz-mmusic-sdp-offer-answer-examples-04.txt


Status of this Memo

   This Internet-Draft is submitted to IETF in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html

   This Internet-Draft will expire on December 7, 2010.

Copyright Notice

   Copyright (c) 2010 IETF Trust and the persons identified as the
   document authors. All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document. Code Components
   extracted from this document must include Simplified BSD License text



Schwarz               Expires December 7, 2010                [Page 1]

Internet-Draft  Examples for Revised SDP Offer/Answer        June 2010


   as described in Section 4.e of the Trust Legal Provisions and are
   provided without warranty as described in the Simplified BSD License.

Abstract

   This document gives examples of Session Description Protocol (SDP)
   offer/answer exchanges. The SDP offer/answer protocol was revised by
   [SDPCapNeg] and [MediaCapNeg] plus other extensions.  Examples
   include the indication, negotiation and selection of media
   configurations ("codecs"). This document discusses primarily examples
   of IP bearer emulation scenarios for PSTN modem calls in SIP-
   controlled VoIP networks. Further may be highlighted the examples
   like for instance "autonomous state transitioning between Audio VoIP
   and T.38 FoIP" or "G.725 terminal emulation".

   The purpose of this document is thus the same as the list of examples
   by RFC 4317 [2] for the legacy SDP offer/answer protocol (RFC 3264
   [1]).



Table of Contents


   1. Terminology...................................................3
      1.1. Abbreviations............................................3
   2. Overview......................................................4
   3. Revised SDP Offer/Answer Protocol.............................5
   4. Examples for "Emulating PSTN Modem Calls".....................5
      4.1. Supported SDP capabilities by SIP devices................6
      4.2. Audio VoIP, no V.152 VBDoIP and no T.38 FoIP (Example 1).7
      4.3. Audio VoIP, V.152 VBDoIP, but no T.38 FoIP (Example 2)...8
         4.3.1. Example 2.1 - Multiple audio & multiple VBD codecs..8
         4.3.2. Example 2.2 - Single audio codec, two VBD codecs....9
         4.3.3. Example 2.3 - Two audio codecs & one VBD codec
         (overlapping with audio)..................................10
         4.3.4. Example 2.4 - Declaration of RTP packet redundancy.11
         4.3.5. Example 2.5 - Forward Error Correction for V.152 with
         PCMU as VBD codec)........................................11
      4.4. Audio VoIP, V.152 VBDoIP and T.38 FoIP (Example 3)......12
         4.4.1. Example Offer......................................12
            4.4.1.1. Capabilities (Media, Transport) by OFFERER....12
            4.4.1.2. Offered Codec/Configuration List (OCL_A)......13
            4.4.1.3. SDP Syntax....................................14
         4.4.2. Example Answers....................................17
            4.4.2.1. ANSWERER not compliant to SDP_R_O/A...........17



Schwarz               Expires December 7, 2010                [Page 2]

Internet-Draft  Examples for Revised SDP Offer/Answer        June 2010


            4.4.2.2. ANSWERER supports SDP_R_O/A and is V.152 compliant
             ......................................................18
            4.4.2.3. ANSWERER supports SDP_R_O/A and is none-V.152
            compliant..............................................18
      4.5. T.38 FoIP only calls, no Audio VoIP, no V.152 VBDoIP (Example
      4)...........................................................19
         4.5.1. Example 4.1 - Agreement on T.38-over-UDPTL/UDP, multiple
         transport variants offered................................19
      4.6. T.38 FoIP and Audio VoIP, no V.152 VBDoIP (Example 5)...20
         4.6.1. Example 5.1 - Multiple audio codecs, single T.38 option
          .........................................................20
         4.6.2. Example 5.2 - Autonomous state transitioning between
         Audio VoIP and T.38 FoIP..................................21
         4.6.3. Example 5.3 - Single audio codec, three T.38
         configurations concerning error correction methods........23
         4.6.4. Example 5.4 - Single audio codec, three T.38
         configurations concerning error correction methods, and pseudo-
         VBD mode as T.38 fallback option..........................24
      4.7. Other examples: in ITU-T Recommendations V.152 and T.38.26
         4.7.1. Revised SDP Offer/Answer examples for V.152 VBDoIP.26
         4.7.2. Revised SDP Offer/Answer examples for T.38 FoIP....26
   5. Example "G.711 A-law & G.711 u-law with preference on A-law".26
   6. Example "G.711 in multiple format configurations"............26
   7. Example "G.725 terminal emulation"...........................28
   8. Other examples...............................................29
   9. Security Considerations......................................30
   10. IANA Considerations.........................................30
   11. Changes from previous versions..............................30
      11.1. Changes from version 00................................30
      11.2. Changes from version 01................................30
      11.3. Changes from version 02................................30
      11.4. Changes from version 03................................31
   12. References..................................................31
      12.1. Normative References...................................31
      12.2. Informative References.................................31

1. Terminology

   The scope of the examples in this document is related to offer/answer
   exchanges for 'media configurations'. The term 'codec' if often
   synonymously used for 'media configuration' in the context of
   capability indication, negotiation and selection.

1.1. Abbreviations

   ACL    Answered Configuration (Codec) List
   ATA    Analog Terminal Adaptor (= SIP residential gateway)


Schwarz               Expires December 7, 2010                [Page 3]

Internet-Draft  Examples for Revised SDP Offer/Answer        June 2010


   FoIP   Facsimile over IP according ITU-T T.38 [9]
   NCL    Negotiated Configuration (Codec) List
   OCL    Offered Configuration (Codec) List
   PBX    Private Branch Exchange (here SIP PBX)
   PCL    Preferred Configuration (Codec) List
   PSTN   Public Switched Telephone Network
   SCL    Supported Configuration (Codec) List
   SDP    Session Description Protocol
   SDP O/A SDP Offer/Answer
   SDP_L   Legacy SDP Offer/Answer (model and protocol)
   SDP_R   Revised SDP Offer/Answer (model and protocol)
   SIP    Session Initiation Protocol
   VBD    Voiceband Data
   VBDoIP  VBD over IP according ITU-T V.152 [8]
   VGW    Voice Gateway (= SIP access/residential gateway)


2. Overview

   This document describes offer/answer examples of Session Description
   Protocol (SDP) based on revised Offer/Answer model according to [4]
   and [5].

   The SDP in these examples is defined by

   o RFC 4566 [2] for the latest "core protocol" of SDP;

   o RFC xxxx 'SDPCapNeg' [4]: SDP syntax extension for revised SDP
      Offer/Answer framework and transport capabilities;

   o RFC yyyy 'MediaCapNeg' [5]: SDP syntax extension for revised SDP
      Offer/Answer negotiation of media capabilities;

   o ITU-T Rec. V.152 [8]: SDP syntax extension for V.152 VBDoIP pass-
      through service;

   o ITU-T Rec. T.38 [9]: SDP syntax extension for T.38 FoIP packet
      relay service;

   The offers and answers are assumed to be transported using a protocol
   such as Session Initiation Protocol (SIP).

   Examples include indication, negotiation and selection of media
   configurations for voice over IP (VoIP), and in particular, the
   emulation of PSTN modem calls via VoIP infrastructures.




Schwarz               Expires December 7, 2010                [Page 4]

Internet-Draft  Examples for Revised SDP Offer/Answer        June 2010


   The following sections 4 ff. contain examples in which two parties,
   Anna and Ben, exchange SDP offers, answers, and, in some cases,
   additional offers and answers.  Note that the subject line (s=)
   contains a single space character.



3. Revised SDP Offer/Answer Protocol

   The "Revised SDP Offer/Answer Protocol" shall replace the "Legacy SDP
   Offer/Answer Protocol" (according RFC 3264 [1]) and is defined by
   multiple SDP extensions:

   o RFC xxxx 'SDPCapNeg' [4]: framework for Revised SDP Offer/Answer
      model and SDP syntax extension concerning transport capabilities;

   o RFC yyyy 'MediaCapNeg' [5]: SDP syntax extension for media
      capabilities;

   o RFC zzzz 'ConnCapNeg' [6]: SDP syntax extension for connection
      type capabilities;

   o RFC wwww 'MiscCapNeg' [7]: SDP syntax extension for further
      capabilities concerning SDP lines "b=", "c=" and "i=";

   o other extensions may follow (due to the open design of the Revised
      SDP Offer/Answer model.

   It shall be recalled that the "Revised SDP Offer/Answer Protocol" is
   backward compatible (due to semantic of "ignore" of unknown SDP
   syntax) to the "Legacy SDP Offer/Answer Protocol", which ensures
   successful offer/answer exchanges between different SIP entities.

   NOTE - It is noted that the terms 'legacy' and 'revised' are not
          related to the SDP syntax as such, rather to the overall
          "application", i.e. the O/A negotiation protocol. It is not
          expected that the SDP syntax of RFC 3264 [1] will be made
          obsolete by the revised SDP Offer/Answer RFCs.
          It is expected that both SDP O/A protocol variants will be
          used in parallel.

4. Examples for "Emulating PSTN Modem Calls"

   NOTE - The term "PSTN modem call" refers to a voiceband data call
   originating/terminating in a PSTN domain (see clause 3.1 in [11]).




Schwarz               Expires December 7, 2010                [Page 5]

Internet-Draft  Examples for Revised SDP Offer/Answer        June 2010


   Figure 1 illustrates a simple network configuration by two PSTN
   access networks, interconnected by an IP network and SIP-controlled
   PSTN services.

   This section provides some examples for codec indication, negotiation
   and selection of resources for PSTN modem calls via Voice-over-IP
   sessions.

   The SDP offer/answer exchanges are here in responsibility of SIP VoIP
   terminals, SIP voice gateways (VGW) or/and SIP private branch
   exchanges (SIP PBX).

      +---------------------------------------------------+
      |                                                   |
      |                                                   |
      |                                                   |
      |                  /-----------\                    |
      |          SIP/SDP |           | SIP/SDP            |
      |           +------|           |------+             |
      |           |      |           |      |             |
      |---        |      |           |      |         ----|
      |   \   +---+--+   |           |   +--+---+    /    |
      |    \  | SIP  |   |    IP     |   | SIP  |   /     |
      |PSTN )-|Device|---|           |---|Device|--( PSTN |
      |    /  |  'A' |   |  Network  |   |  'B' |   \     |
      |   /   +------+   |           |   +--+---+    \    |
      |---     e.g.      |           |    e.g.        ----|
      |        SIP VGW   \-----------/    SIP ATA         |
      |                                                   |
      |                                                   |
      +---------------------------------------------------+

    Figure 1 PSTN access networks interconnected via a SIP-controlled IP
        network (providing emulation services for PSTN modem calls)

   The Offerer role is provided by 'A', the Answerer role by 'B'.



4.1. Supported SDP capabilities by SIP devices

   The examples for SDP offer/answer exchanges are dependent on
   supported SDP capabilities with regards to SDP offer/answer protocol
   and SDP for control of user plane interworking functions like V.152,
   T.38, V.151 and V.150.1. Table 1 provides the eight theoretical
   combinations for SIP devices, under consideration of just V.152 and
   T.38 only.


Schwarz               Expires December 7, 2010                [Page 6]

Internet-Draft  Examples for Revised SDP Offer/Answer        June 2010




         Table 1: SDP Negotiation Capability support versus SDP
        V.152/T.38 support - Matrix of SIP device specific options
      +-------------------+-------------------------------------------+
      |                   |        Negotiation Capabilities:          |
      | SDP Compatibility +-------------------------------------------+
      |        of         |     SDP_L_O/A:     |     SDP_R_O/A:       |
      |   SIP device:     | Support of Legacy  | Support of Revised   |
      |                   | SDP O/A (RFC 3264) | SDP O/A (RFC 3264)   |
      +-----+---+-----+---+--------------------+----------------------+
      |     |   | SDP | N | no example in doc. | Example 1 (Sec. 4.2) |
      | SDP | N | for +---+--------------------+----------------------+
      |     |   |T.38 | Y | no example in doc. | Example 4 (Sec. 4.5) |
      | for +---+-----+---+--------------------+----------------------+
      |     |   | SDP | N | no example in doc. | Example 2 (Sec. 4.3) |
      |V.152| Y | for +---+--------------------+----------------------+
      |     |   |T.38 | Y | no example in doc. | Example 3 (Sec. 4.4) |
      +-----+---+-----+---+--------------------+----------------------+


   This document provides three example offers (indicated in Table 1) in
   below sub-clauses. There are then again eight options concerning SDP
   support from answerer side. Some candidate answers will be
   illustrated.

4.2. Audio VoIP, no V.152 VBDoIP and no T.38 FoIP (Example 1)

   There are two possible media configurations, offered in this example:

   o Preference 1: Audio (G729) & NTE (RFC 4733)

   o Preference 2: Audio (PCMU incl. silence suppression) & NTE

                    Table 1 - SDP Offer for Example 1
   +-------------------------------------------------------------------+
   | SDP encoding (shortened SDP description)                          |
   ...
   ; ACTUAL CONFIGURATION (due to backward compatibility)
   m=audio 3456 RTP/AVP 18 0 13 96
   a=rtpmap:96 telephone-event/8000
   a=fmtp:96 0-15
   ;
   ; POTENTIAL CONFIGURATIONs
   a=tcap:1 RTP/AVP  ; transport for VoIP
   a=mcap:1 G729/8000    ; audio codec 1
   a=mcap:2 PCMU/8000    ; audio codec 2


Schwarz               Expires December 7, 2010                [Page 7]

Internet-Draft  Examples for Revised SDP Offer/Answer        June 2010


   a=mcap:3 CN/8000      ; comfort noise for audio codec 2
   a=mcap:4 telephone-event/8000 ; NTE codec
   a=mfcap:4 0-15        ; value range DTMF
   a=pcfg:1 t=1 a=-ms:1 m=1,4 pt=1:18,4:96
   a=pcfg:2 t=1 a=-ms:2 m=2,3,4 pt=1:0,3:13,4:96
   +-------------------------------------------------------------------+



4.3. Audio VoIP, V.152 VBDoIP, but no T.38 FoIP (Example 2)

4.3.1. Example 2.1 - Multiple audio & multiple VBD codecs

   Reference: clause 7.1.0.3.1/V.152 [8].

   This is an extension of example 1, by adding V.152 VBDoIP support to
   the audio modes. There are thus four possible media configurations,
   offered in this example:

   o Preference 1: Audio (G729), VBD (V.152 PCMU) & NTE (RFC 4733)

   o Preference 2: Audio (G729), VBD (V.152 G726-32) & NTE (RFC 4733)

   o Preference 3: Audio (PCMU incl. silence suppression), VBD (V.152
      PCMU) & NTE (RFC 4733)

   o Preference 4: Audio (PCMU incl. silence suppression), VBD (V.152
      G726-32) & NTE (RFC 4733)



                    Table 2 - SDP Offer for Example 2.1
   +-------------------------------------------------------------------+
   | SDP encoding (shortened SDP description)                          |
   ...
   ; ACTUAL CONFIGURATION (due to backward compatibility)
   m=audio 3456 RTP/AVP 18 0 13 96 98 99
   a=maxmptime:10 10 - - 20 20
   a=rtpmap:96 telephone-event/8000
   a=fmtp:96 0-15, 34, 35
   a=rtpmap:98 PCMU/8000
   a=gpmd:98 vbd=yes
   a=rtpmap:99 G726-32/8000
   a=gpmd:99 vbd=yes
   ;
   ; POTENTIAL CONFIGURATIONs
   a=tcap:1 RTP/AVP  ; transport for VoIP & VBDoIP


Schwarz               Expires December 7, 2010                [Page 8]

Internet-Draft  Examples for Revised SDP Offer/Answer        June 2010


   a=acap:1 maxmptime:10 20 -
   a=acap:2 maxmptime:10 - 20 -
        ; due to media format order in 'pcfg' lines
   a=mcap:1 G729/8000    ; audio codec 1
   a=mcap:2,5 PCMU/8000  ; audio codec 2 & VBD codec 1
   a=mcap:3 CN/8000      ; comfort noise for audio c. 2
   a=mcap:4 telephone-event/8000 ; NTE codec
   a=mcap:6 G726-32/8000 ; VBD codec 2
   a=mfcap:4 0-15,32-35 ; value range DTMF & VBD stimuli
   a=mscap:5 gpmd vbd=yes  ; for V.152 PCMU
   a=mscap:6 gpmd vbd=yes  ; for V.152 G726-32
   a=pcfg:1 t=1 a=-ms:1 m=1,5,4 pt=1:18,5:98,4:96
   a=pcfg:2 t=1 a=-ms:1 m=1,6,4 pt=1:18,6:99,4:96
   a=pcfg:3 t=1 a=-ms:2 m=2,3,5,4 pt=1:0,3:13,5:98,4:96
   a=pcfg:4 t=1 a=-ms:2 m=2,3,6,4 pt=1:0,3:13,6:99,4:96
   +-------------------------------------------------------------------+



4.3.2. Example 2.2 - Single audio codec, two VBD codecs

   Reference: clause 7.1.0.3.2/V.152 [8].

   There are two possible media configurations, offered in this example:

   o Preference 1: Audio (G729), VBD (V.152 PCMU)

   o Preference 2: Audio (G729), VBD (V.152 G726-32)



                    Table 3 - SDP Offer for Example 2.2
   +-------------------------------------------------------------------+
   | SDP encoding (shortened SDP description)                          |
   ...
   ; ACTUAL CONFIGURATION (due to backward compatibility)
   m=audio 3456 RTP/AVP 0 18 98
   a=gpmd:0 vbd=yes
   a=rtpmap:98 G726-32/8000
   a=gpmd:98 vbd=yes
   a=ptime:20
   ;
   ; POTENTIAL CONFIGURATIONs
   a=tcap:1 RTP/AVP  ; transport for VoIP & VBDoIP
   a=acap:1 ptime:20 ; common packetization time
   a=mcap:1 G729/8000      ; audio codec
   a=mcap:2 PCMU/8000      ; VBD codec 1


Schwarz               Expires December 7, 2010                [Page 9]

Internet-Draft  Examples for Revised SDP Offer/Answer        June 2010


   a=mcap:3 G726-32/8000   ; VBD codec 2
   a=mscap:2 gpmd vbd=yes  ; for V.152 PCMU
   a=mscap:3 gpmd vbd=yes  ; for V.152 G726-32
   a=pcfg:1 t=1 a=-ms:1 m=1,2 pt=1:18,2:0
   a=pcfg:2 t=1 a=-ms:1 m=1,3 pt=1:18,3:98
   +-------------------------------------------------------------------+



4.3.3. Example 2.3 - Two audio codecs & one VBD codec (overlapping with
   audio)

   Reference: clause 7.1.3.1/V.152 [8].

   There are two media configurations, offered in this example:

   o Preference 1: Audio (G729), VBD (V.152 PCMU)

   o Preference 2: Audio (PCMU incl. silence suppression), VBD (V.152
      PCMU)



                    Table 4 - SDP Offer for Example 2.3
   +-------------------------------------------------------------------+
   | SDP encoding (shortened SDP description)                          |
   ...
   ; ACTUAL CONFIGURATION (due to backward compatibility)
   m=audio <udpPort A> RTP/AVP 18 0 13 96
   a=ptime:10
   a=rtpmap:96 PCMU/8000
   a=gpmd: 96 vbd=yes
   ;
   ; POTENTIAL CONFIGURATIONs
   a=tcap:1 RTP/AVP  ; transport for VoIP & VBDoIP
   a=acap:1 ptime:10 ; common packetization time
   a=mcap:1 G729/8000    ; audio codec 1
   a=mcap:2,4 PCMU/8000  ; audio codec 2 & VBD codec 1
   a=mcap:3 CN/8000      ; comfort noise for audio codec 2
   a=mscap:4 gpmd vbd=yes  ; for V.152 PCMU
   a=pcfg:1 t=1 a=-ms:1 m=1,4 pt=1:18,4:96
   a=pcfg:2 t=1 a=-ms:1 m=2,3,4 pt=1:0,3:13,4:96
   +-------------------------------------------------------------------+






Schwarz               Expires December 7, 2010               [Page 10]

Internet-Draft  Examples for Revised SDP Offer/Answer        June 2010


4.3.4. Example 2.4 - Declaration of RTP packet redundancy

   Reference: clause 7.1.4.1/V.152 [8].

   Following media configuration shall be offered in this example:

   o Preference 1: Audio (G728), VBD (V.152 PCMU with packet
      redundancy)



                    Table 5 - SDP Offer for Example 2.4
   +-------------------------------------------------------------------+
   | SDP encoding (shortened SDP description)                          |
   ...
   ; ACTUAL CONFIGURATION (due to backward compatibility)
   m=audio 3456 RTP/AVP 0 15 102
   a=gpmd:0 vbd=yes
   a=rtpmap:102 red/8000
   a=fmtp:102 0/0/0/0
   ;
   ; POTENTIAL CONFIGURATIONs
   a=tcap:1 RTP/AVP  ; transport for VoIP & VBDoIP
   a=mcap:1 G728/8000    ; audio codec
   a=mcap:2 PCMU/8000    ; VBD codec
   a=mcap:3 RED/8000     ; RTP RFC 2198 redundancy
   a=mfcap:3 %2%/%2%/%2%/%2% ; RFC 2198 redundancy format
   a=mscap:2 gpmd vbd=yes  ; for V.152 PCMU
   a=pcfg:1 t=1 a=-ms m=2,1,3 pt=2:0,1:15,3:102
   +-------------------------------------------------------------------+



4.3.5. Example 2.5 - Forward Error Correction for V.152 with PCMU as VBD
   codec)

   Reference: clause 7.1.4.1.2/V.152 [8].

   Following media configuration shall be offered in this example:

   o Preference 1: Audio (G728), VBD (V.152 PCMU forward error
      correction)



                    Table 6 - SDP Offer for Example 2.5
   +-------------------------------------------------------------------+


Schwarz               Expires December 7, 2010               [Page 11]

Internet-Draft  Examples for Revised SDP Offer/Answer        June 2010


   | SDP encoding (shortened SDP description)                          |
   ...
   ; ACTUAL CONFIGURATION (due to backward compatibility)
   c=IN IP4 224.2.17.12
   t=0 0
   m=audio 49170 RTP/AVP 0 15 78
   a=gpmd:0 vbd=yes
   a=rtpmap:78 parityfec/8000
   a=fmtp:78 49170 IN IP4 224.2.17.12
   ;
   ; POTENTIAL CONFIGURATIONs
   a=tcap:1 RTP/AVP  ; transport for VoIP & VBDoIP
   a=mcap:1 G728/8000       ; audio codec
   a=mcap:2 PCMU/8000       ; VBD codec
   a=mcap:3 parityfec/8000  ; RTP RFC 5109 FEC
   a=mscap:2 gpmd vbd=yes   ; for V.152 PCMU
   a=pcfg:1 t=1 a=-ms m=2,1,3 pt=2:0,1:15,3:78
   +-------------------------------------------------------------------+



4.4. Audio VoIP, V.152 VBDoIP and T.38 FoIP (Example 3)

   The primary goal of the configuration exchanges in this section is
   the successful negotiation of

   o separate states for 'audio' and 'voiceband data';

   o V.152 VBD as "generic VBD" codec for ALL PSTN modem call types;
      and

   o eventually, T.38 application in case of a fax/modem call type.



4.4.1. Example Offer

4.4.1.1. Capabilities (Media, Transport) by OFFERER

   The Offerer ('Anna', briefly A) provides following endpoint (gateway)
   capabilities, which may be summarized as Supported
   Codec/Configuration List (SCL):

   SCL_A = {





Schwarz               Expires December 7, 2010               [Page 12]

Internet-Draft  Examples for Revised SDP Offer/Answer        June 2010


   o Audio codecs for VoIP modes:
      - G.711 with & without silence suppression,
      - G.729AB;

   o Auxiliary codecs for application control incl. VBD stimuli:
      - RFC 4733 NTE (network telephone events);

   o Voiceband data codecs:
      - V.152 G.711 for VBDoIP,
      - T.38 FoIP with UDPTL/UDP transport variant}.

   The SCL is converted to an Offered Codec/Configuration List (OCL) by
   the Offerer, by taking into account the application ("PSTN call"),
   local policies (like preferences), QoS considerations and eventually
   the present condition of the IP network.

4.4.1.2. Offered Codec/Configuration List (OCL_A)

   The generated OCL follows above order of the SCL, e.g. V.152 first
   before using T.38 in case of fax/modem.

   OCL_A = {

   o offered configuration o1 (= actual configuration):
      o1 = {audio(G.711 w/o silence suppression);
            voiceband data(V.152 G.711 non-assured transport);
            RFC 4733 telephone event codec}

   o offered configuration o2 (= potential configuration p1):
      o2 = o1
      NOTE: 'o2' is required for a SDP_R_O/A compliant answerer, whereas
      'o1' reflects the preferred configuration for legacy SDP_L_O/A
      devices.

   o offered configuration o3 (= potential configuration p2):
      o3 = {audio(G.729B);
            voiceband data(V.152 G.711 non-assured transport);
            RFC 4733 telephone event codec}

   o offered configuration o4 (= potential configuration p3):
      o4 = {audio(G.711 w/o silence suppression);
            voiceband data(V.152 G.711 assured transport using packet
                           redundancy);
            RFC 4733 telephone event codec}





Schwarz               Expires December 7, 2010               [Page 13]

Internet-Draft  Examples for Revised SDP Offer/Answer        June 2010


   o offered configuration o5 (= potential configuration p4):
      o5 = {audio(G.729B);
            fax/modem data(T.38 with UDPTL/UDP transport);
            RFC 4733 telephone event codec}
      NOTE: assumption is "simultaneous" audio & fax support by
      preparing separate IP transport connections for audio (= RTP
      session for G.729) and fax (= UDPTL/UDP connection for T.38
      traffic), in order to serve the "alternate speech-fax" PSTN
      service.

   o offered configuration o6 (= potential configuration p5):
      o6 = {audio(G.711 w/o silence suppression);
            voiceband data(merged with audio mode, i.e. pseudo-VBD);
            RFC 4733 telephone event codec}
      NOTE: this configuration is considered to be the fallback option
      for remote devices without any V.152 support.

   }

   The structure of OCL_A is based on the assumption that V.152 is
   already supported by some SIP nodes and the preference of V.152 over
   T.38.



4.4.1.3. SDP Syntax

   The OCL_A is mapped on SDP, e.g. following the example of Table 7.
   The offered configuration with T.38 (o5) requires the usage of
   session configurations due to the separate "m=" line for T.38
   configurations. The T.38 configuration is also announced as latent
   configuration due to the low priority of offered configuration o5.



                    Table 7 - SDP Offer for Example 3
   +-------------------------------------------------------------------+
   | SDP lines                                                         |
   |No.| Syntax and Comments                                           |
   +---+---------------------------------------------------------------+
   |  1| v=0                                                           |
   |  2| o=- 1234 0 IN IP4 11.9.19.65                                  |
   |  3| s=SIP Speech Call incl VBD support  ; "PSTN modem call"       |
   |  4| c=IN IP4 11.9.19.65                                           |
   |  5| t=0 0                                                         |
   |  6| ; Indication of SDPCapNeg & MediaCapNeg support               |
   |  7| a=creq:med-v0 ; explicit indication of MediaCapNeg            |


Schwarz               Expires December 7, 2010               [Page 14]

Internet-Draft  Examples for Revised SDP Offer/Answer        June 2010


   |   |                                                               |
   |  8| ; SESSION CONFIGURATIONS (offered)                            |
   |  9| ; Session configurations allow to specify combinations of     |
   | 10| ; monomedia' (VoIP + VBDoIP) and 'multimedia' (VoIP + FoIP)   |
   | 11| ; media stream configurations                                 |
   | 12| a=sescap:1 1    ; VoIP = G.711, VBDoIP = V.152(G.711)         |
   | 13| a=sescap:2 2    ; VoIP = G.729, VBDoIP = V.152(G.711)         |
   | 14| a=sescap:3 3    ; VoIP = G.711, VBDoIP = V.152(G.711+RED)     |
   | 15| a=sescap:4 4,10 ; VoIP = G.729, FoIP = T.38                   |
   | 16| a=sescap:5 5    ; {V&VBD}oIP = G.711 (=> pVBDoIP)             |
   |   |                                                               |
   | 17| ; LATENT CONFIGURATION (offered, session level)               |
   | 18| ; Latent configuration: T.38 FoIP announcement in order to    |
   | 19| ; a) indicate T.38 support and b) to indicate the supported   |
   | 20| ; T.38 transport mode and configuration details.              |
   | 21| ; transport capabilities:                                     |
   | 22| a=tcap:20 udptl     ; T.38 FoUDPTL/UDP transport variant      |
   | 23| ; media encoding capabilities:                                |
   | 24| a=mcap:10 t38       ; T.38 FoIP codec (subtype = 't38'        |
   | 25|   ; according to RFC 3362 image/t38 MIME subtype registration)|
   | 26| ; attribute capabilities:                                     |
   | 27| a=acap:11 T38FaxVersion:1                                     |
   | 28| a=acap:12 T38FaxRateManagement:transferredTCF                 |
   | 29| a=acap:13 T38FaxUdpEC:t38UDPFEC                               |
   | 30| a=acap:14 T38FaxMaxBufferSize:2000                            |
   | 31| a=acap:15 T38MaxDatagram:512                                  |
   | 32| a=acap:16 T38MaxBitRate:14400                                 |
   | 33| a=acap:17 (...additional T.38 attributes may be included)     |
   | 34| ; latent configuration (= T.38)                               |
   | 35| a=lcfg:10 mt=image t=20 m=10 a=11,12,13,14,15,16,17           |
   |   |                                                               |
   | 36| ; ACTUAL CONFIGURATION (offered)                              |
   | 37| ; SDP o1 - Actual configuration (= p1)                        |
   | 38| m=audio 40000 RTP/AVP 8 101 120                               |
   | 39| a=sendrecv                                                    |
   | 40| a=rtpmap:101 PCMA/8000                                        |
   | 41| a=gpmd:101 vbd=yes                                            |
   | 42| a=rtpmap:120 telephone-event/8000                             |
   | 43| a=fmtp:120 0-15,32-35  ; value range for DTMF and VBD stimuli |
   | 44| a=ptime:20             ; common packetization time for VoIP & |
   | 45|                        ; VBDoIP PCMoRTP packets               |
   |   |                                                               |
   | 46| ; POTENTIAL CONFIGURATION(S) (offered)                        |
   | 47| ; transport capabilities:                                     |
   | 48| a=tcap:1 RTP/AVP         ; RFC 3551 XoRTP transp. (for audio, |
   | 49|                          ; voiceband data & auxiliary)        |
   | 50| ; attribute capabilities:                                     |


Schwarz               Expires December 7, 2010               [Page 15]

Internet-Draft  Examples for Revised SDP Offer/Answer        June 2010


   | 51| a=acap:1 ptime:20 ; for 20 ms packets for XoRTP media flows   |
   | 52| a=acap:2 sendrecv ;                                           |
   | 53| ; media encoding capabilities:                                |
   | 54| a=mcap:1 G729/8000        ; selected compressing voice codec  |
   | 55| a=mcap:2,4 PCMA/8000            ; G.711 A-law (assuming an    |
   | 56|                                 ; A-law region) & VBD codec   |
   | 57| a=mcap:3 telephone-event/8000   ; RFC 4733 codec for NTE      |
   | 58| a=mcap:5 RED/8000      ; RTP packet with RFC 2198 redundancy  |
   | 59| ; media format parameter capabilities:                        |
   | 60| a=mfcap:1 annexb=yes   ; silence suppression mode for G.729   |
   | 61| a=mfcap:3 0-15,32-35   ; value range for DTMF and VBD stimuli |
   | 62| a=mfcap:5 %4%/%4%      ; RFC 2198 redundancy format           |
   | 63|                               ; for "VBD codec"               |
   | 64| ; media specific capabilities:                                |
   | 65| a=mscap:2 gpmd vbd=yes                ; for V.152 if RTP flow |
   | 66| ; potential configurations:                                   |
   | 67| ; SDP o2 - Potential config p1 (= Actual Config):             |
   | 68| ;        Audio (G.711), VBD (V.152) & RFC 4733 / 20 ms        |
   | 69| a=pcfg:1                                                      |
   | 70| ; SDP o3 - Potential config p2:                               |
   | 71| ;        Audio (G.729AB), VBD (V.152) & RFC 4733 / 20 ms      |
   | 72| a=pcfg:2 t=1 a=-ms:1,2 m=1,2,3 pt=1:18,2:101,3:120            |
   | 73| ; SDP o4 - Potential config p3:                               |
   | 74| ; Audio (G.711), VBD (V.152 + RFC 2198 Red) & RFC 4733 / 20 ms|
   | 75| a=pcfg:3 t=1 a=-ms:1,2 m=4,2,5,3 pt=4:8,2:101,5:102,3:120     |
   | 76| ; SDP o5 - Potential config p4:                               |
   | 77| ;        Audio (G.729AB) & RFC 4733 with 20 ms                |
   | 78| a=pcfg:4 t=1 a=-ms:1,2 m=1,3 pt=1:18,3:120                    |
   | 79| ; SDP o6 - Potential config p5:                               |
   | 80| ;        pVBD = merged Audio&VBD (G.711), & RFC 4733 / 20 ms  |
   | 81| a=pcfg:5 t=1 a=-ms:1,2 m=4,3 pt=4:8,3:120                     |
   | 82|                                                               |
   | 83|                                                               |
   +---+---------------------------------------------------------------+


   Some comments to SDP syntax:

   o line 15: the only session configuration with two media decriptions
      (due to requested two parallel IP transport connections for audio
      and T.38);

   o line 24: only subtype ('t38') is part of mcap, but not media type
      (here 'image');

   o line 58: it shall be noted that there are two, case-sensitive
      registrations with IANA for RFC 2198 ('red', 'RED');


Schwarz               Expires December 7, 2010               [Page 16]

Internet-Draft  Examples for Revised SDP Offer/Answer        June 2010


   o line 62: the attribute indication for format parameter ('fmtp') is
      already inherent to the name 'mfcap';

   o line 72: the "a=-ms" operator is used to remove all legacy
      attribute lines on session and media description level.



4.4.2. Example Answers

   Just some possible answers shall be indicated.

4.4.2.1. ANSWERER not compliant to SDP_R_O/A

   All unknown SDP syntax is removed ("ignored") by the SDP decoder.
   Following lines are remaining, representing the actual configuration.
   The answerer is supporting the requested capabilities, which may be
   acknowledged by following Answer.



              Table 8 - SDP Answer for legacy SDP_L_O/A device
   +-------------------------------------------------------------------+
   | SDP lines                                                         |
   |No.| Syntax and Comments                                           |
   +---+---------------------------------------------------------------+
   |  1| v=0                                                           |
   |  2| o=- 1234 0 IN IP4 19.65.11.9                                  |
   |  3| s=SIP Speech Call incl VBD support  ; "PSTN modem call"       |
   |  4| c=IN IP4 19.65.11.9                                           |
   |  5| t=0 0                                                         |
   |   |                                                               |
   | 36| ; ACTUAL CONFIGURATION (offered)                              |
   | 37| ; SDP o1 - Actual configuration (= p1)                        |
   | 38| m=audio 40000 RTP/AVP 8 101 120                               |
   | 39| a=sendrecv                                                    |
   | 40| a=rtpmap:101 PCMA/8000                                        |
   | 41| a=gpmd:101 vbd=yes                                            |
   | 42| a=rtpmap:120 telephone-event/8000                             |
   | 43| a=fmtp:120 0-15,32-35  ; value range for DTMF and VBD stimuli |
   | 44| a=ptime:20             ; common packetization time for VoIP & |
   | 45|                        ; VBDoIP PCMoRTP packets               |
   |   |                                                               |
   +---+---------------------------------------------------------------+





Schwarz               Expires December 7, 2010               [Page 17]

Internet-Draft  Examples for Revised SDP Offer/Answer        June 2010


4.4.2.2. ANSWERER supports SDP_R_O/A and is V.152 compliant

   Ben includes the "a=acfg" attribute in the answer to inform Anna that
   he based his answer on an offer using potential configuration 1.



              Table 9 - SDP Answer (SDP_R_O/A, V.152 compliant)
   +-------------------------------------------------------------------+
   | SDP lines                                                         |
   |No.| Syntax and Comments                                           |
   +---+---------------------------------------------------------------+
   |  1| v=0                                                           |
   |  2| o=- 1234 0 IN IP4 19.65.11.9                                  |
   |  3| s=SIP Speech Call incl VBD support  ; "PSTN modem call"       |
   |  4| c=IN IP4 19.65.11.9                                           |
   |  5| t=0 0                                                         |
   |   |                                                               |
   | 36| ; ACTUAL CONFIGURATION (offered)                              |
   | 37| ; SDP o1 - Actual configuration (= p1)                        |
   | 38| m=audio 40000 RTP/AVP 8 101 120                               |
   | 39| a=sendrecv                                                    |
   | 40| a=rtpmap:101 PCMA/8000                                        |
   | 41| a=gpmd:101 vbd=yes                                            |
   | 42| a=rtpmap:120 telephone-event/8000                             |
   | 43| a=fmtp:120 0-15,32-35  ; value range for DTMF and VBD stimuli |
   | 44| a=ptime:20             ; common packetization time for VoIP & |
   | 45|                        ; VBDoIP PCMoRTP packets               |
   |   |                                                               |
   | 69| a=acfg:1                                                      |
   +---+---------------------------------------------------------------+




4.4.2.3. ANSWERER supports SDP_R_O/A and is none-V.152 compliant

   Ben includes the "a=acfg" attribute in the answer to inform Anna that
   he based his answer on an offer using potential configuration 5.



              Table 10 - SDP Answer (SDP_R_O/A, none-V.152 compliant)
   +-------------------------------------------------------------------+
   | SDP lines                                                         |
   |No.| Syntax and Comments                                           |
   +---+---------------------------------------------------------------+


Schwarz               Expires December 7, 2010               [Page 18]

Internet-Draft  Examples for Revised SDP Offer/Answer        June 2010


   |  1| v=0                                                           |
   |  2| o=- 1234 0 IN IP4 19.65.11.9                                  |
   |  3| s=SIP Speech Call excluding VBD support                       |
   |  4| c=IN IP4 19.65.11.9                                           |
   |  5| t=0 0                                                         |
   |  6| ; Indication of SDPCapNeg & MediaCapNeg support               |
   |  7| a=csup:med-v0 ; explicit indication of MediaCapNeg            |
   |   |               ;(optional but recommended (SDPCapNeg 3.3.1)    |
   |   | ; SESSION CONFIGURATIONS (Supported)                          |
   |   | ; Only sescap:5 is supported, if other session caps had been  |
   |   | ; supported then they would have been selected as sescap:5 is |
   |   | ; least preferred one                                         |
   | 16| a=sescap:5 5    ; {V&VBD}oIP = G.711 (=> pVBDoIP)             |
   |   |                                                               |
   | 36| ; ACTUAL CONFIGURATION (offered)                              |
   | 37| ; SDP o6 - Actual configuration (= p5)                        |
   | 38| m=audio 40004 RTP/AVP 8 120                                   |
   | 39| a=rtpmap:8 PCMA/8000                                          |
   | 40| a=rtpmap:120 telephone-event/8000                             |
   | 41| a=fmpt:120 0-15,32-35                                         |
   | 42| a=ptime:20  ; Before or after the rtpmap and fmtp attr lines? |
   | 43| a=sendrecv                                                    |
   | 81| a=acfg:5                                                      |
   +---+---------------------------------------------------------------+


4.5. T.38 FoIP only calls, no Audio VoIP, no V.152 VBDoIP (Example 4)

4.5.1. Example 4.1 - Agreement on T.38-over-UDPTL/UDP, multiple
   transport variants offered

   Reference: clause D.2.4.1.1/T.38 [9].

   Following two media configurations shall be offered in this example:

   o Preference 1: T.38 FoUDPTL/UDP

   o Preference 2: T.38 FoTPKT/TCP



                    Table 11 - SDP Offer for Example 4.1
   +-------------------------------------------------------------------+
   | SDP encoding (shortened SDP description)                          |
   ...
   1) OFFER (embedded in SIP INVITE):
   ...


Schwarz               Expires December 7, 2010               [Page 19]

Internet-Draft  Examples for Revised SDP Offer/Answer        June 2010


   ; ACTUAL CONFIGURATION (due to backward compatibility)
   m=image 49170 udptl t38
   a=T38FaxRateManagement:transferredTCF
   a=T38FaxUdpEC:t38UDPFEC
   m=image 49172 tcp t38
   a=T38FaxRateManagement:localTCF
   ;
   ; POTENTIAL CONFIGURATIONs
   a=tcap:1 udptl   ; T.38 FoUDPTL/UDP transport variant
   a=tcap:2 tcp     ;  T.38 FoTPKT/TCP transport variant
   a=mcap:1 t38      ; T.38 FoIP codec (subtype = 't38')
   ; Transport-independent T.38 parameters
   a=acap:11 T38FaxVersion:4
   ; Transport-dependent T.38 parameters for UDPTL/UDP
   a=acap:12 T38FaxUdpEC:t38UDPFEC
   a=acap:13 (... additional T.38 UDPTL attributes should
                be included)
   ; Transport-dependent T.38 parameters for TPKT/TCP
   a=acap:21 T38FaxRateManagement:localTCF
   a=acap:22 (... additional T.38 TPKT attributes should
                be included)
   ; Preferences
   a=pcfg:1 mt=image t=1 m=1 a=-ms:11,12,13,14,...
   a=pcfg:2 mt=image t=2 m=1 a=-ms:11,21,...

   2) ANSWER (embedded in SIP 200 OK):
   ...
   a=acfg:1
   +-------------------------------------------------------------------+



4.6. T.38 FoIP and Audio VoIP, no V.152 VBDoIP (Example 5)

4.6.1. Example 5.1 - Multiple audio codecs, single T.38 option

   Reference: clause D.2.4.2.3/T.38 [9].

   Following two media configurations shall be offered in this example:

   o Preference 1: Audio (G729) and Fax Relay (T.38 FoUDPTL/UDP)

   o Preference 2: Audio (PCMU) and Fax Relay (T.38 FoUDPTL/UDP)






Schwarz               Expires December 7, 2010               [Page 20]

Internet-Draft  Examples for Revised SDP Offer/Answer        June 2010


                    Table 12 - SDP Offer for Example 5.1
   +-------------------------------------------------------------------+
   | SDP encoding (shortened SDP description)                          |
   ...
   1) OFFER (embedded in SIP INVITE):
   ...
   ; ACTUAL CONFIGURATION (due to backward compatibility)
   ... ommitted ...

   ; SESSION CONFIGURATIONs
   a=sescap:1 1,3  ; VoIP = G.729, FoIP = T.38 UDPTL/UDP
   a=sescap:2 2,3  ; VoIP = G.711, FoIP = T.38 UDPTL/UDP

   ; LATENT CONFIGURATION for T.38
   a=tcap:2 udptl   ; T.38 FoUDPTL/UDP transport variant
   a=mcap:5 t38      ; T.38 FoIP codec (subtype = 't38')
   a=acap:11 T38FaxVersion:4
   a=acap:12 T38FaxRateManagement:transferredTCF
   a=acap:13 T38FaxUdpEC:t38UDPRedundancy
   a=acap:14 (... additional T.38 attributes may be incl.)
   a=lcfg:3 mt=image t=2 m=5 a=11,12,13,14,...

   ; POTENTIAL CONFIGURATIONs
   a=tcap:1 RTP/AVP  ; transport for VoIP
   a=acap:1 ptime:20   ; for G.729
   a=acap:2 ptime:10   ; for G.711
   a=mcap:1 G729/8000  ; audio codec 1
   a=mcap:2 PCMU/8000  ; audio codec 2
   a=pcfg:1 t=1 a=-ms:1 m=1 pt=1:18
   a=pcfg:2 t=1 a=-ms:1 m=2 pt=1:0

   2) ANSWER (embedded in SIP 200 OK):
   ...
   a=sescap:2
   +-------------------------------------------------------------------+

   The Answerer does not support G.729 and agrees to the 2nd session
   configuration.



4.6.2. Example 5.2 - Autonomous state transitioning between Audio VoIP
   and T.38 FoIP

   Reference: clause D.2.2.4.3/T.38 [9].

   A single media configuration shall be offered in this example:


Schwarz               Expires December 7, 2010               [Page 21]

Internet-Draft  Examples for Revised SDP Offer/Answer        June 2010


   o Preference 1: Audio (G729) and Fax Relay (T.38 FoUDPTL/UDP)



                    Table 13 - SDP Offer for Example 5.2
   +-------------------------------------------------------------------+
   | SDP encoding (shortened SDP description)                          |
   ...
   1) OFFER (embedded in SIP INVITE):
   ...
   ; ACTUAL CONFIGURATION (due to backward compatibility)
   ... ommitted ...

   ; SESSION CONFIGURATIONs
   a=sescap:1 1,3  ; VoIP = G.729, FoIP = T.38 UDPTL/UDP

   ; LATENT CONFIGURATION for T.38
   a=tcap:2 udptl   ; T.38 FoUDPTL/UDP transport variant
   a=mcap:5 t38      ; T.38 FoIP codec (subtype = 't38')
   a=acap:11 T38FaxVersion:4
   a=acap:12 T38FaxRateManagement:transferredTCF
   a=acap:13 T38FaxUdpEC:t38UDPRedundancy
   a=acap:14 (... additional T.38 attributes may be incl.)
   a=lcfg:3 mt=image t=2 m=5 a=11,12,13,14,...

   ; POTENTIAL CONFIGURATIONs
   a=tcap:1 RTP/AVP  ; transport for VoIP
   a=acap:1 ptime:20   ; for G.729
   a=mcap:1 G729/8000  ; audio codec 1
   a=pcfg:1 t=1 a=-ms:1 m=1 pt=1:18

   2) ANSWER (embedded in SIP 200 OK):
   ...
   a=sescap:1
   +-------------------------------------------------------------------+

   The Answerer agrees to the session configuration, i.e., support of
   T.38 Version 4, too. The agreement confirms the execution of
   autonomous state transitioning at both gateway locations (on-ramp and
   off-ramp gateway), see clause D.2.2.4.3/T.38 [9].









Schwarz               Expires December 7, 2010               [Page 22]

Internet-Draft  Examples for Revised SDP Offer/Answer        June 2010


4.6.3. Example 5.3 - Single audio codec, three T.38 configurations
   concerning error correction methods

   Following three media configurations shall be offered in this
   example:

   o Preference 1: Audio (G729) and Fax Relay (T.38 FoUDPTL/UDP with
      error correction method "t38UDPRedundancy")
      i.e. T.38 using packet redundancy as error correction

   o Preference 2: Audio (G729) and Fax Relay (T.38 FoUDPTL/UDP with
      error correction method "t38UDPFEC")
      i.e. T.38 using Forward Error Correction as error correction

   o Preference 3: Audio (G729) and Fax Relay (T.38 FoUDPTL/UDP with
      error correction method "t38UDPNoEC")
      i.e. T.38 without any error correction



                    Table x1 - SDP Offer for Example 5.3
   +-------------------------------------------------------------------+
   | SDP encoding (shortened SDP description)                          |
   ...
   1) OFFER (embedded in SIP INVITE):
   ...
   ; ACTUAL CONFIGURATION (due to backward compatibility)
   ... ommitted ...

   ; SESSION CONFIGURATIONs
   a=sescap:1 1,3  ; VoIP = G.729, FoIP = T.38 UDPTL/UDP with packet red
   a=sescap:2 1,4  ; VoIP = G.729, FoIP = T.38 UDPTL/UDP with FEC
   a=sescap:3 1,5  ; VoIP = G.729, FoIP = T.38 UDPTL/UDP with NoEC

   ; LATENT CONFIGURATION for T.38
   a=tcap:2 udptl   ; T.38 FoUDPTL/UDP transport variant
   a=mcap:5 t38      ; T.38 FoIP codec (subtype = 't38')
   a=acap:11 T38FaxVersion:4
   a=acap:12 T38FaxRateManagement:transferredTCF
   a=acap:13 (... all T.38 attributes shall be incl.)
   a=acap:21 T38FaxUdpEC:t38UDPRedundancy    ; error correction scheme 1
   a=acap:22 T38FaxUdpEC:t38UDPFEC           ; error correction scheme 2
   a=acap:23 T38FaxUdpEC:t38UDPNoEC          ; error correction scheme 3
   a=lcfg:3 mt=image t=2 m=5 a=11,12,13,...,21  ; T.38 configuration #1
   a=lcfg:4 mt=image t=2 m=5 a=11,12,13,...,22  ; T.38 configuration #2
   a=lcfg:5 mt=image t=2 m=5 a=11,12,13,...,23  ; T.38 configuration #3



Schwarz               Expires December 7, 2010               [Page 23]

Internet-Draft  Examples for Revised SDP Offer/Answer        June 2010


   ; POTENTIAL CONFIGURATIONs
   a=tcap:1 RTP/AVP  ; transport for VoIP
   a=acap:1 ptime:10   ; for G.711
   a=mcap:1 G729/8000  ; audio codec 1
   a=pcfg:1 t=1 a=-ms:1 m=1 pt=1:18

   2) ANSWER (embedded in SIP 200 OK):
   ...
   a=sescap:1
   +-------------------------------------------------------------------+

   The Answerer does support T.38 error correction scheme "packet
   redundancy" and agrees to the 1st session configuration.



4.6.4. Example 5.4 - Single audio codec, three T.38 configurations
   concerning error correction methods, and pseudo-VBD mode as T.38
   fallback option

   This is an extension of example 5.3, considering the possibilities of

   o peer side is supporting T.38, but not supporting any of the three
      offered T.38 configurations; or

   o peer side is not supporting T.38 at all; and

   o Offerer is not supporting V.152 VBD, thus trying to offer pseudo-
      VBD mode.

   There would be then a fourth media configuration as fallback option
   to the three T.38 configurations.

   Following four media configurations shall be offered in this example:

   o Preference 1: Audio (G729) and Fax Relay (T.38 FoUDPTL/UDP with
      error correction method "t38UDPRedundancy")
      i.e. T.38 using packet redundancy as error correction

   o Preference 2: Audio (G729) and Fax Relay (T.38 FoUDPTL/UDP with
      error correction method "t38UDPFEC")
      i.e. T.38 using Forward Error Correction as error correction

   o Preference 3: Audio (G729) and Fax Relay (T.38 FoUDPTL/UDP with
      error correction method "t38UDPNoEC")
      i.e. T.38 without any error correction



Schwarz               Expires December 7, 2010               [Page 24]

Internet-Draft  Examples for Revised SDP Offer/Answer        June 2010


   o Preference 4: pseudo-VBD mode: G.711 for audio and VBD traffic



                    Table x2 - SDP Offer for Example 5.4
   +-------------------------------------------------------------------+
   | SDP encoding (shortened SDP description)                          |
   ...
   1) OFFER (embedded in SIP INVITE):
   ...
   ; ACTUAL CONFIGURATION (due to backward compatibility)
   ... ommitted ...

   ; SESSION CONFIGURATIONs
   a=sescap:1 1,3  ; VoIP = G.729, FoIP = T.38 UDPTL/UDP with packet red
   a=sescap:2 1,4  ; VoIP = G.729, FoIP = T.38 UDPTL/UDP with FEC
   a=sescap:3 1,5  ; VoIP = G.729, FoIP = T.38 UDPTL/UDP with NoEC
   a=sescap:4 2    ; pseudo-VBD mode: G.711 for audio and VBD traffic

   ; LATENT CONFIGURATION for T.38
   a=tcap:2 udptl   ; T.38 FoUDPTL/UDP transport variant
   a=mcap:5 t38      ; T.38 FoIP codec (subtype = 't38')
   a=acap:11 T38FaxVersion:4
   a=acap:12 T38FaxRateManagement:transferredTCF
   a=acap:13 (... all T.38 attributes shall be incl.)
   a=acap:21 T38FaxUdpEC:t38UDPRedundancy    ; error correction scheme 1
   a=acap:22 T38FaxUdpEC:t38UDPFEC           ; error correction scheme 2
   a=acap:23 T38FaxUdpEC:t38UDPNoEC          ; error correction scheme 3
   a=lcfg:3 mt=image t=2 m=5 a=11,12,13,...,21  ; T.38 configuration #1
   a=lcfg:4 mt=image t=2 m=5 a=11,12,13,...,22  ; T.38 configuration #2
   a=lcfg:5 mt=image t=2 m=5 a=11,12,13,...,23  ; T.38 configuration #3

   ; POTENTIAL CONFIGURATIONs
   a=tcap:1 RTP/AVP  ; transport for VoIP
   a=acap:1 ptime:20   ; for G.729
   a=acap:2 ptime:10   ; for G.711
   a=mcap:1 G729/8000  ; audio codec 1
   a=mcap:2 PCMU/8000  ; audio codec 2
   a=pcfg:1 t=1 a=-ms:1 m=1 pt=1:18
   a=pcfg:2 t=1 a=-ms:1 m=2 pt=1:0

   +-------------------------------------------------------------------+







Schwarz               Expires December 7, 2010               [Page 25]

Internet-Draft  Examples for Revised SDP Offer/Answer        June 2010


4.7. Other examples: in ITU-T Recommendations V.152 and T.38

4.7.1. Revised SDP Offer/Answer examples for V.152 VBDoIP

   The latest Revision of ITU-T Recommendation V.152 [8] provides
   further signaling examples in clause 7, for various V.152 media
   configurations.

4.7.2. Revised SDP Offer/Answer examples for T.38 FoIP

   The latest Revision of ITU-T Recommendation T.38 [9] provides further
   signaling examples in Annex D.2.4, for various T.38 media
   configurations.



5. Example "G.711 A-law & G.711 u-law with preference on A-law"

   There are two possible media configurations, offered in this example:

   o Preference 1: Audio (PCMU)

   o Preference 2: Audio (PCMA)

                    Table 14 - SDP Offer for Example
   +-------------------------------------------------------------------+
   | SDP encoding (shortened SDP description)                          |
   ...
   ; ACTUAL CONFIGURATION (due to backward compatibility)
   m=audio 3456 RTP/AVP 0 8
   ;
   ; POTENTIAL CONFIGURATIONs
   a=tcap:1 RTP/AVP  ; transport for VoIP
   a=mcap:1 PCMU/8000    ; audio codec 1
   a=mcap:2 PCMA/8000    ; audio codec 2
   a=pcfg:1 t=1 a=-ms:1 m=1 pt=1:0
   a=pcfg:2 t=1 a=-ms:2 m=2 pt=1:8
   +-------------------------------------------------------------------+



6. Example "G.711 in multiple format configurations"

   G.711 A-law with three different packetization times (5, 10 & 20 ms;
   preference 20 ms), combined with/without silence suppression
   (preference: w/o), combined with three RTP profiles (RFC 3551, RFC
   5762, RFC 5764) as transport (preference: RFC 3551)


Schwarz               Expires December 7, 2010               [Page 26]

Internet-Draft  Examples for Revised SDP Offer/Answer        June 2010


   There are 18 (= 3 x 2 x 3) possible media configurations, offered in
   this example, see Table 15:

   o Preference 1: Audio (PCMU w/o silence suppression), RTP-over-UDP,
      20 ms packetization time

   o Preferences 2 to 6: RTP-over-UDP, other combinations of
      packetization times and silence suppression

   o Preferences 7 to 12: RTP-over-DCCP, combinations of packetization
      times and silence suppression

   o Preferences 13 to 18: SRTP-over-DTLS, combinations of
      packetization times and silence suppression

                    Table 15 - SDP Offer for Example
   +-------------------------------------------------------------------+
   | SDP encoding (shortened SDP description)                          |
   ...
   ; ACTUAL CONFIGURATION (due to backward compatibility)
   ... omitted [note: only a subset of the PCL would be offered
                due to the issue in specifying packetization
                times (see draft-garcia-mmusic-multiple-ptimes-problem)]
   ...
   ;
   ; POTENTIAL CONFIGURATIONs
   ; transport capabilities:
   a=tcap:1 RTP/AVP          ; G.711-over-RTP transport via RFC 3551
   a=tcap:2 DCCP/RTP/AVP     ; G.711-over-RTP transport via RFC 5762
   a=tcap:3 UDP/TLS/RTP/SAVP ; G.711-over-RTP transport via RFC 5764
   ; attribute capabilities:
   a=acap:1 ptime:5          ; packetization time of  5 ms
   a=acap:2 ptime:10         ; packetization time of 10 ms
   a=acap:3 ptime:20         ; packetization time of 20 ms
   ; media capabilities:
   a=mcap:1 PCMU/8000        ; audio codec
   a=mcap:2 CN/8000          ; comfort noise for audio codec
   ; PCL (= Preferred Configuration (Codec) List):
   ;      UDP transport, unencrypted G.711 audio
   a=pcfg:1  t=1 a=-ms:3 m=1   pt=1:0
   a=pcfg:2  t=1 a=-ms:3 m=1,2 pt=1:0,2:13
   a=pcfg:3  t=1 a=-ms:2 m=1   pt=1:0
   a=pcfg:4  t=1 a=-ms:2 m=1,2 pt=1:0,2:13
   a=pcfg:5  t=1 a=-ms:1 m=1   pt=1:0
   a=pcfg:6  t=1 a=-ms:1 m=1,2 pt=1:0,2:13
   ;      DCCP transport, unencrypted G.711 audio
   a=pcfg:7  t=2 a=-ms:3 m=1   pt=1:0


Schwarz               Expires December 7, 2010               [Page 27]

Internet-Draft  Examples for Revised SDP Offer/Answer        June 2010


   a=pcfg:8  t=2 a=-ms:3 m=1,2 pt=1:0,2:13
   a=pcfg:9  t=2 a=-ms:2 m=1   pt=1:0
   a=pcfg:10 t=2 a=-ms:2 m=1,2 pt=1:0,2:13
   a=pcfg:11 t=2 a=-ms:1 m=1   pt=1:0
   a=pcfg:12 t=2 a=-ms:1 m=1,2 pt=1:0,2:13
   ;      UDP transport, encrypted G.711 audio, encrypted transport
   a=pcfg:13 t=3 a=-ms:3 m=1   pt=1:0
   a=pcfg:14 t=3 a=-ms:3 m=1,2 pt=1:0,2:13
   a=pcfg:15 t=3 a=-ms:2 m=1   pt=1:0
   a=pcfg:16 t=3 a=-ms:2 m=1,2 pt=1:0,2:13
   a=pcfg:17 t=3 a=-ms:1 m=1   pt=1:0
   a=pcfg:18 t=3 a=-ms:1 m=1,2 pt=1:0,2:13
   +-------------------------------------------------------------------+



7. Example "G.725 terminal emulation"

   The ISDN terminal "G.725" provides advanced speech telephony services
   by support of narrowband voice (using either PCMA or PCMU) and
   wideband audio (using G722) and even the option of embedded data
   channels. G.725 [14] defines here four, so-called "transmission
   modes". Furthermore, three types of G.725 terminals are defined,
   according to their modes of operations

   A single 64 kbit/s bearer is used for transport in ISDN domains. Such
   an ISDN bearer is transported via CMD-over-RTP in IP networks (using
   RFC 4040), like in a "trunking scenario" ISDN-IP-ISDN using
   {G722|PCMx}-over-CMD/RTP/UDP/IP as common "framing" in IP domain
   (note: the Clearmode format represents a "1x64 Circuit Emulation
   Service").

   Such ISDN terminals are still used by business customers like e.g.
   news reporters in live TV sessions (in order to get best speech
   quality as possible in case of ISDN access).

   This example focuses on G.725 "Type 1" terminals, which are capable
   of working in Mode 1 (7 kHz audio using G722) or in Mode 0 (here
   PCMA) as fallback. Such a terminal may be emulated by a SIP UA.
   Leading to "native RTP framings" in IP domain: either G722/RTP/UDP/IP
   or PCMx/RTP/UDP/IP, dependent on terminal emulation mode.

   This example is characterized by following properties:

   o single preferred configuration, here wideband audio;




Schwarz               Expires December 7, 2010               [Page 28]

Internet-Draft  Examples for Revised SDP Offer/Answer        June 2010


   o narrowband speech must be prepared as fallback option, which leads
      to the specification of a single latent configuration;

   o a "G.725 terminal emulation" implies that both sides, Offerer and
      Answerer, commit to support both terminal modes, which leads to
      the specification of a single session configuration.



             Table 16 - SDP Offer for Example "G.725 emulation"
   +-------------------------------------------------------------------+
   | SDP encoding (shortened SDP description)                          |
   ...
   1) OFFER (embedded in SIP INVITE):
   ...
   ; ACTUAL CONFIGURATION (due to backward compatibility)
   ... ommitted ...

   ; SESSION CONFIGURATIONs
   a=sescap:1 1,2  ; for G.722 WB-VoIP and G.711 NB-VoIP as fallback

   ; LATENT CONFIGURATION for NB-VoIP
   a=lcfg:2 t=1 a=-ms:1 m=2 pt=1:0

   ; POTENTIAL CONFIGURATION
   a=tcap:1 RTP/AVP    ; transport for WB-VoIP and NB-VoIP
   a=acap:1 ptime:20   ; for WB G.722 and NB G.711
   a=mcap:1 G722/8000  ; audio codec 1 (wideband, WB)
   a=mcap:2 PCMU/8000  ; audio codec 2 (narrowband, NB)
   a=pcfg:1 t=1 a=-ms:1 m=1 pt=1:9

   2) ANSWER (embedded in SIP 200 OK):
   ...
   a=sescap:1
   +-------------------------------------------------------------------+

   The Answerer supports both codec types and agrees to autonomous mode
   transitioning between WB and NB voice. The call will start in G.722
   WB-VoIP mode.



8. Other examples

   [-]




Schwarz               Expires December 7, 2010               [Page 29]

Internet-Draft  Examples for Revised SDP Offer/Answer        June 2010




9. Security Considerations

   Same security considerations as RFC 4317 [2].

10. IANA Considerations

   This document introduces no IANA considerations.

11. Changes from previous versions

11.1. Changes from version 00

   o Clarifications in clause Abstract and Overview

   o list of abbreviations

   o new Figure 1

11.2. Changes from version 01

   o editorial corrections

   o reference to "PSTN modem call" definition

   o addition of clause 4.5

   o update of references

11.3. Changes from version 02

   o update of clause 3: note added concerning terms 'legacy' and
      'revised'

   o update of clause 4.2: one example added

   o update of clause 4.3: five example2 added

   o update of clause 4.5: one example added

   o update of clause 4.6: two examples added

   o update of clause 5: missing example added

   o update of clause 6: missing example added



Schwarz               Expires December 7, 2010               [Page 30]

Internet-Draft  Examples for Revised SDP Offer/Answer        June 2010


   o update of clause 7: missing example added

   o update of clause 12.2: further ref

11.4. Changes from version 03

   o further T.38 example: clause 4.6.3, "Single audio codec, three
      T.38 configurations concerning error correction methods"

   o further T.38 example: clause 4.6.4, "Single audio codec, three
      T.38 configurations concerning error correction methods, and
      pseudo-VBD mode as T.38 fallback option"



12. References

12.1. Normative References

   None.

12.2. Informative References

   [1]  Rosenberg, J. and H. Schulzrinne, "An Offer/Answer Model with
         Session Description Protocol (SDP)", RFC 3264, June 2002.

   [2]  Johnston, A. and R. Sparks, "Session Description Protocol (SDP)
         - Offer/Answer Examples", RFC 4317, December 2005.

   [3]  Handley, M. and V. Jacobson, "SDP: Session Description
         Protocol", RFC 4566, July 2006.

   [4]  Andreasen, F., "SDP Capability Negotiation", draft-ietf-mmusic-
         sdp-capability-negotiation (work in progress).

   [5]  Gilman, R., et al., "SDP media capabilities Negotiation",
         draft-ietf-mmusic-sdp-media-capabilities (work in progress).

   [6]  Garcia-Martin, M. and S. Veikkolainen, "Session Description
         Protocol (SDP) Extension For Setting Up Audio Media Streams
         Over Circuit-Switched Bearers In The Public Switched Telephone
         Network (PSTN)", draft-ietf-mmusic-sdp-cs (work in progress).

   [7]  Garcia-Martin, M. et al., "Miscellaneous Capabilities
         Negotiation in the Session Description Protocol (SDP)", draft-
         ietf-mmusic-sdp-misc-cap (work in progress).



Schwarz               Expires December 7, 2010               [Page 31]

Internet-Draft  Examples for Revised SDP Offer/Answer        June 2010


   [8]  ITU-T Recommendation V.152, "Procedures for supporting voice-
         band data over IP networks".

   [9]  ITU-T Recommendation T.38, "Procedures for real-time Group 3
         facsimile communication over IP networks".

   [10] MultiService Forum (MSF), msf2009.046, April 2009, "Revised SDP
         Offer/Answer Model for Negotiations between SIP entities".

   [11] ETSI TR 183 072, "Telecommunications and Internet converged
         Services and Protocols for Advanced Networking (TISPAN);
         Emulation Services for PSTN Modem Calls".

   [12] SIP Forum, 2009, "FoIP Task Group Problem Statement".
         access via http://www.sipforum.org/

   [13] SIP Forum, 2009, "FoIP Task Group Strawman Proposal".
         access via http://www.sipforum.org/

   [14] ITU-T Recommendation G.725, "System aspects for the use of the
         7 kHz audio codec within 64 kbit/s", 1988.



























Schwarz               Expires December 7, 2010               [Page 32]

Internet-Draft  Examples for Revised SDP Offer/Answer        June 2010


Authors' Addresses

   Albrecht Schwarz
   Alcatel-Lucent
   Lorenzstrasse 10
   D-70435 Stuttgart
   Germany

   Email: Albrecht.Schwarz@alcatel-lucent.com


   Juergen Stoetzer-Bradler
   Alcatel-Lucent
   Lorenzstrasse 10
   D-70435 Stuttgart
   Germany

   Email: Juergen.Stoetzer-Bradler@alcatel-lucent.com






























Schwarz               Expires December 7, 2010               [Page 33]

