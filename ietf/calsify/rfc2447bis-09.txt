





INTERNET-DRAFT                                              A. Melnikov
Document: draft-ietf-calsify-rfc2447bis-09.txt                   Editor
Intended status: Standard Track                           June 21, 2010
Expires: December 2010


           iCalendar Message-Based Interoperability Protocol
                                 (iMIP)

Status of this Memo

   This Internet-Draft is submitted to IETF in full conformance with the
   provisions of BCP 78 and BCP 79.  This document may contain material
   from IETF Documents or IETF Contributions published or made publicly
   available before November 10, 2008.  The person(s) controlling the
   copyright in some of this material may not have granted the IETF
   Trust the right to allow modifications of such material outside the
   IETF Standards Process.  Without obtaining an adequate license from
   the person(s) controlling the copyright in such materials, this
   document may not be modified outside the IETF Standards Process, and
   derivative works of it may not be created outside the IETF Standards
   Process, except to format it for publication as an RFC or to
   translate it into languages other than English.

   Internet-Drafts are working documents of the Internet
   Engineering Task Force (IETF), its areas, and its
   working groups. Note that other groups may also distribute
   working documents as Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of
   six months and may be updated, replaced, or obsoleted by
   other documents at any time. It is inappropriate to use
   Internet-Drafts as reference material or to cite them other
   than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/1id-abstracts.html

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   A revised version of this draft document will be submitted to the RFC
   editor as a Draft Standard for the Internet Community.  Discussion
   and suggestions for improvement are requested, and should be sent to
   the CALSIFY Mailing list <ietf-calsify@osafoundation.org>.
   Distribution of this document is unlimited.

Copyright Notice



Melnikov (Ed.)               Standards Track            FORMFEED[Page 1]





RFC 2447bis                       iMIP                         June 2010


   Copyright (c) 2010 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the BSD License.

Abstract

   This document, iCalendar Message-Based Interoperability Protocol
   (iMIP), specifies a binding from the iCalendar Transport-independent
   Interoperability Protocol (iTIP) to Internet email-based transports.
   Calendaring entries defined by the iCalendar Object Model (iCalendar)
   are wrapped using constructs from RFC 5322, RFC 2045, RFC 2046, RFC
   2047 and RFC 2049, and then transported over SMTP.






























Melnikov (Ed.)               Standards Track            FORMFEED[Page 2]





RFC 2447bis                       iMIP                         June 2010


Table of Contents

 1 INTRODUCTION........................................................2
  1.1 RELATED MEMOS ...................................................2
  1.2 FORMATTING CONVENTIONS ..........................................3
  1.3 TERMINOLOGY .....................................................4
 2 MIME MESSAGE FORMAT BINDING.........................................4
  2.1 MIME MEDIA TYPE .................................................4
  2.2 SECURITY ........................................................4
    2.2.1 Authorization ...............................................4
    2.2.2 Authentication ..............................................5
    2.2.3 Confidentiality .............................................5
  2.3 EMAIL ADDRESSES .................................................5
  2.4 CONTENT TYPE ....................................................5
  2.5 CONTENT-TRANSFER-ENCODING .......................................6
  2.6 CONTENT-DISPOSITION .............................................6
 3 SECURITY CONSIDERATIONS.............................................7
 4 EXAMPLES............................................................8
  4.1 SINGLE COMPONENT WITH AN ATTACH PROPERTY ........................8
  4.2 USING MULTIPART ALTERNATIVE FOR LOW FIDELITY CLIENTS ............8
  4.3 SINGLE COMPONENT WITH AN ATTACH PROPERTY AND INLINE ATTACHMENT ..9
  4.4 MULTIPLE SIMILAR COMPONENTS ....................................10
  4.5 MULTIPLE MIXED COMPONENTS ......................................11
  4.6 DETAILED COMPONENTS WITH AN ATTACH PROPERTY ....................13
 5 RECOMMENDED PRACTICES..............................................14
  5.1 USE OF CONTENT AND MESSAGE IDS .................................14
 6 REFERENCES.........................................................15
 7 EDITOR'S ADDRESSES.................................................16
 8 FULL COPYRIGHT STATEMENT...........................................XX
 9 INTELLECTUAL PROPERTY..............................................XX

1 Introduction

   This binding document provides the transport specific information
   necessary to convey iCalendar Transport-independent Interoperability
   Protocol (iTIP) [iTIP] over Internet email (using MIME) as defined in
   [RFC-5322] and [RFC-2045].

1.1 Related Memos

   Implementers will need to be familiar with several other memos that,
   along with this memo, form a framework for Internet calendaring and
   scheduling standards.

   This document, [iMIP], specifies an Internet email binding for iTIP.

   [iCAL] - specifies a core specification of objects, data types,
   properties and property parameters;



Melnikov (Ed.)               Standards Track            FORMFEED[Page 3]





RFC 2447bis                       iMIP                         June 2010


   [iTIP] - specifies an interoperability protocol for scheduling
   between different implementations;

   This memo does not attempt to repeat the specification of concepts or
   definitions from these other memos. Where possible, references are
   made to the memo that provides for the specification of these
   concepts or definitions.

1.2 Formatting Conventions

   The mechanisms defined in this memo are defined in prose. In order to
   refer to elements of the calendaring and scheduling model, core
   object or interoperability protocol defined in [iCAL] and [iTIP] some
   formatting conventions have been used.

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC-2119].

   Calendaring and scheduling roles are referred to in quoted-strings of
   text with the first character of each word in upper case. For
   example, "Organizer" refers to a role of a "Calendar User" within the
   scheduling protocol defined by [iTIP].

   Calendar components defined by [iCAL] are referred to with
   capitalized, quoted-strings of text. All calendar components start
   with the letter "V". For example, "VEVENT" refers to the event
   calendar component, "VTODO" refers to the to-do calendar component
   and "VJOURNAL" refers to the daily journal calendar component.

   Scheduling methods defined by [iTIP] are referred to with
   capitalized, quoted-strings of text. For example, "REQUEST" refers to
   the method for requesting a scheduling calendar component be created
   or modified, "REPLY" refers to the method a recipient of a request
   uses to update their status with the "Organizer" of the calendar
   component.

   Properties defined by [iCAL] are referred to with capitalized,
   quoted-strings of text, followed by the word "property". For example,
   "ATTENDEE" property refers to the iCalendar property used to convey
   the calendar address of a calendar user.

   Property parameters defined by [iCAL] are referred to with lower
   case, quoted-strings of text, followed by the word "parameter". For
   example, "value" parameter refers to the iCalendar property parameter
   used to override the default data type for a property value.





Melnikov (Ed.)               Standards Track            FORMFEED[Page 4]





RFC 2447bis                       iMIP                         June 2010


1.3 Terminology

   The email terms used in this memo are defined in [RFC-5322] and
   [RFC-2045]. The calendaring and scheduling terms used in this memo
   are defined in [iCAL] and [iTIP].

2 MIME Message Format Binding

   This section defines the message binding to the MIME electronic mail
   transport.

   The sections below refer to the "originator" and the "recipient" of
   an iMIP message. In the case of a "request" method, the originator is
   the "Organizer" and the recipient is an "Attendee" of the event. In
   the case of a "response" method, the originator is an "Attendee" and
   the recipient is the "Organizer" of the event.

   The [RFC-5322] "Reply-To" header field typically contains the email
   address of the originator of the scheduling message. However, this
   cannot be guaranteed because the sender of the iMIP message might not
   be the originator of the scheduling message and the sender's Mail
   User Agent (MUA) might not enforce iMIP semantics by translating the
   originator's address into the "Reply-To" email header field.

2.1 MIME Media Type

   A MIME entity containing content information formatted according to
   this document will be referenced as a "text/calendar" content type.
   It is assumed that this content type will be transported through a
   MIME electronic mail transport.

2.2 Security

   This section addresses several aspects of security including
   authentication, authorization and confidentiality. Authentication and
   confidentiality can be achieved using [RFC-1847] that specifies the
   Security Multiparts for MIME. This framework defines new content
   types and subtypes of multipart: signed and encrypted. Each contains
   two body parts: one for the protected data and another for the
   control information necessary to remove the protection.

2.2.1 Authorization

   In [iTIP] messages, only the "Organizer" is authorized to modify or
   cancel calendar entries she organizes. That is, spoof@xyz.example.net
   is not allowed to modify or cancel a meeting that was organized by
   a@example.com. Furthermore, only the respondent has the authorization
   to indicate their status to the "Organizer". That is, the "Organizer"



Melnikov (Ed.)               Standards Track            FORMFEED[Page 5]





RFC 2447bis                       iMIP                         June 2010


   must ignore an [iTIP] message from spoof@xyz.example.net that
   declines a meeting invitation for b@example.com.

   Implementations of iMIP SHOULD verify the authenticity of the creator
   of an iCalendar object before taking any action. Methods for doing
   this are presented later in this document.

   [RFC-1847] Message flow in iTIP supports someone working on behalf of
   a "Calendar User" through use of the "sent-by" parameter that is
   associated with the "ATTENDEE" and "ORGANIZER" properties. However,
   there is no mechanism to verify whether or not a "Calendar User" has
   authorized someone to work on their behalf. It is left to
   implementations to provide mechanisms for the "Calendar Users" to
   make that decision.

2.2.2 Authentication

   Authentication can be performed using an implementation of [RFC-1847]
   "multipart/signed" that supports public/private key certificates.
   Authentication is possible only on messages that have been signed.
   Authenticating an unsigned message may not be reliable.

2.2.3 Confidentiality

   To ensure confidentiality using iMIP implementations should utilize
   encryption compliant with [RFC-1847]. The protocol does not restrict
   a "Calendar User Agent" (CUA) from forwarding iCalendar objects to
   other users or agents.

2.3 Email Addresses

   The calendar address specified within the "ORGANIZER" and "ATTENDEE"
   properties in an iCalendar object send using iMIP MUST be a proper
   "mailto:" [MAILTO] URI specification for the corresponding
   "Organizer" or "Attendee" of the "VEVENT" or "VTODO".

   Because [iTIP] does not preclude "Attendees" from forwarding
   "VEVENTS" or "VTODOS" to others, the [RFC-5322] "Sender" value may
   not equal that of the "Organizer". Additionally, the "Organizer" or
   "Attendee" cannot be reliably inferred by the [RFC-5322] "Sender" or
   "Reply-to" values of an iMIP message. The relevant address MUST be
   ascertained by opening the "text/calendar" MIME body part and
   examining the "ATTENDEE" and "ORGANIZER" properties.

2.4 Content-Type Header Field

   A MIME body part containing content information that conforms to this
   document MUST have an [RFC-2045] "Content-Type" value of



Melnikov (Ed.)               Standards Track            FORMFEED[Page 6]





RFC 2447bis                       iMIP                         June 2010


   "text/calendar". The [RFC-2045] "Content-Type" header field MUST also
   include the type MIME parameter "method". The value MUST be the same
   (ignoring case) as the value of the "METHOD" property within the
   iCalendar object.

   Note 1: A MIME message containing multiple iCalendar objects with
   different method values MUST be further encapsulated with a
   "multipart/mixed" MIME entity. This will allow each of the iCalendar
   objects to be encapsulated within their own "text/calendar" MIME
   entity.

   Note 2: A MIME body part of "text/calendar" "Content-Type" that lacks
   the "method" parameter is not considered to be an iMIP body part and
   thus is not subject to the requirements specified in this document.

   Note that according to [iCAL] the default character set for iCalendar
   objects is UTF-8 [UTF-8].  However the default character set for a
   "text/*" MIME entity according to [RFC-2046] is US-ASCII. Thus a
   "charset" MIME parameter MUST be present if the iCalendar object
   contains characters that can't be represented in US-ASCII character
   set and, as specified in [iCAL], it MUST have the value "UTF-8".

   The optional "component" MIME parameter defines the iCalendar
   component type contained within the iCalendar object.

   The following is an example of this header field with a value that
   indicates an event message.

        Content-Type: text/calendar; method=request; charset=UTF-8;
              component=vevent

   The "text/calendar" content type allows for the scheduling message
   type to be included in a MIME message with other content information
   (i.e., "multipart/mixed") or included in a MIME message with a clear-
   text, human-readable form of the scheduling message (i.e.,
   "multipart/alternative").

   In order to permit the information in the scheduling message to be
   understood by MIME user agents (UA) that do not support the
   "text/calendar" content type, scheduling messages SHOULD be sent with
   an alternative, human-readable form of the information.

   Note that "multipart/alternative" MUST NOT be used to represent two
   slightly different iCalendar objects, for example two VEVENT with
   alternative starting times.

   CUAs can use other MIME parameters of the Content-Type header field,
   as well as a language specified in the Content-Language header field



Melnikov (Ed.)               Standards Track            FORMFEED[Page 7]





RFC 2447bis                       iMIP                         June 2010


   [RFC-3282], to pick a "text/calendar" part for processing if a
   "multipart/alternative" MIME message contains more than one
   "text/calendar" part.

   Any receiving UA compliant with this specification MUST be able to
   process "text/calendar" body parts enclosed within "multipart/*".
   Note that a "multipart/mixed" MIME message can include multiple
   "text/calendar" components. The receiving UA MUST be able to process
   all of them.

2.5 Content-Transfer-Encoding Header Field

   Unless iMIP message is transported over 8-bit clean transport (such
   as SMTP [8BITMIME]), a transfer encoding such as quoted-printable or
   base64 [RFC-2045] MUST be used for iCalendar objects containing any
   characters that can't be represented in the US-ASCII character set.
   For example:

   From: user1@example.com
   To: user2@example.com
   Subject: Phone Conference
   Mime-Version: 1.0
   Date: Wed, 07 May 2008 21:30:25 +0400
   Message-ID: <4821E731.5040506@laptop1.example.com>
   Content-Type: text/calendar; method=REQUEST; charset=UTF-8
   Content-Transfer-Encoding: quoted-printable

   BEGIN:VCALENDAR
   PRODID:-//Example/ExampleCalendarClient//EN
   METHOD:REQUEST
   VERSION:2.0
   BEGIN:VEVENT
   ORGANIZER:mailto:user1@example.com
   ATTENDEE;ROLE=CHAIR;PARTSTAT=ACCEPTED:mailto:user1@example.com
   ATTENDEE;RSVP=YES;CUTYPE=INDIVIDUAL:mailto:user2@example.com
   DTSTAMP:20080507T170000Z
   DTSTART:20080701T160000Z
   DTEND:20080701T163000Z
   SUMMARY:Phone call to discuss your last visit
   DESCRIPTION:=D1=82=D1=8B =D0=BA=D0=B0=D0=BA - =D0=B4=D0=BE=D0=
    =B2=D0=BE=D0=BB=D0=B5=D0=BD =D0=BF=D0=BE=D0=B5=D0=B7=D0=B4=D0=BA=D0
    =BE=D0=B9?
   UID:calsvr.example.com-8739701987387998
   SEQUENCE:0
   STATUS:TENTATIVE
   END:VEVENT
   END:VCALENDAR




Melnikov (Ed.)               Standards Track            FORMFEED[Page 8]





RFC 2447bis                       iMIP                         June 2010


2.6 Content-Disposition Header Field

   Implementations MAY include a "Content-Disposition" header field to
   define a file name for an iCalendar object.  However, the handling of
   a MIME part MUST be based on its [RFC-2045] "Content-Type" and not on
   the extension specified in the "Content-Disposition", as different
   email malware is known to trick User Agents into misinterpreting
   content of messages by specifying a file extension in the Content-
   Disposition header field that doesn't correspond to the value of
   Content-Type header field.









































Melnikov (Ed.)               Standards Track            FORMFEED[Page 9]





RFC 2447bis                       iMIP                         June 2010


3 Security Considerations

   The security threats that applications must address when implementing
   iTIP are detailed in [iTIP]. In particular two spoofing threats are
   identified in [iTIP]: Spoofing the "Organizer", and Spoofing an
   "Attendee". To address these threats, the originator of an iCalendar
   object must be authenticated by a recipient. Once authenticated, a
   determination can be made as to whether or not the originator is
   authorized to perform the requested operation. Compliant applications
   MUST support signing and encrypting text/calendar body parts using a
   mechanism based on Security Multiparts for MIME [RFC-1847] to
   facilitate the authentication of the originator of the iCalendar
   object. The steps for processing a signed iMIP message are described
   below:

   1. Using the security mechanism compliant with [RFC-1847], determine
   who signed the email message containing the iCalendar object. This is
   the "signer".  Note that the signer is not necessarily the person
   sending an e-mail message since an e-mail message can be forwarded.

   2. Correlate the signer to either an "ATTENDEE" property or to the
   "ORGANIZER" property in the iCalendar object, based on the method and
   the calendar component specified in the iCalendar object, as defined
   in Section 1.4 of [iTIP].  If the signer cannot be correlated to an
   "ATTENDEE"/"ORGANIZER" property, then actively warn the user
   controlling the calendar user agent that the iCalendar object is
   untrusted and encourage the user to ignore the message, but give
   advanced users the option to (a) view the certificate of the signer
   and the entire certificate chain (if any) in order to help decide if
   the signer should be trusted to send the message, and then (b) allow
   CUA to accept and process the iCalendar object.

   3. Determine whether or not the "ATTENDEE"/"ORGANIZER" is authorized
   to perform the operation as defined by [iTIP]. If the conditions are
   not met, ignore the message.

   4. If all the above conditions are met, the message can be processed.

   [RFC-1847] signing also protects against malicious changes in
   transit.

   If calendar confidentiality is required by the sender, signed iMIP
   messages SHOULD be encrypted by a mechanism based on Security
   Multiparts for MIME [RFC-1847].

   Once a signed and/or encrypted iMIP message is received and
   successfully verified (as detailed above) by a CUA, the CUA SHOULD
   remember whether the sender of the message is using signing and/or



Melnikov (Ed.)               Standards Track           FORMFEED[Page 10]





RFC 2447bis                       iMIP                         June 2010


   encrypting.  If an unsigned iMIP message is received from the same
   sender later on, the receiving CUA SHOULD warn the receiving user
   about a possible man-in-the-middle attack and SHOULD ignore the
   message, unless explicitly overridden by the user.

   Implementations MAY provide means for users to disable signing and
   encrypting.

   It is possible to receive iMIP messages sent by someone working on
   behalf of another "Calendar User". This is determined by examining
   the "sent-by" parameter in the relevant "ORGANIZER" or "ATTENDEE"
   property.  [iCAL] and [iTIP] provide no mechanism to verify that a
   "Calendar User" has authorized someone else to work on their behalf.
   To address this security issue, implementations MUST provide
   mechanisms for the "Calendar Users" to make that decision before
   applying changes from someone working on behalf of a "Calendar User".
   One way to achieve this is to reject iMIP messages sent by users
   other than the "ORGANIZER" or the "ATTENDEE"s.

   A security consideration associated with use of Content-Disposition
   header field is described in section 2.6.






























Melnikov (Ed.)               Standards Track           FORMFEED[Page 11]





RFC 2447bis                       iMIP                         June 2010


4 Examples

4.1 Single Component With An ATTACH Property

   This minimal message shows how an iCalendar object references an
   attachment. The attachment is accessible via its URL.

   From: sman@netscape.example.com
   To: stevesil@microsoft.example.com
   Subject: Phone Conference
   Mime-Version: 1.0
   Content-Type: text/calendar; method=REQUEST; charset=US-ASCII
   Content-Transfer-Encoding: 7bit

   BEGIN:VCALENDAR
   PRODID:-//Example/ExampleCalendarClient//EN
   METHOD:REQUEST
   VERSION:2.0
   BEGIN:VEVENT
   ORGANIZER:mailto:man@netscape.example.com
   ATTENDEE;ROLE=CHAIR;PARTSTAT=ACCEPTED:mailto:man@netscape.example.com
   ATTENDEE;RSVP=YES:mailto:stevesil@microsoft.example.com
   DTSTAMP:19970611T190000Z
   DTSTART:19970701T210000Z
   DTEND:19970701T230000Z
   SUMMARY:Phone Conference
   DESCRIPTION:Please review the attached document.
   UID:calsvr.example.com-873970198738777
   ATTACH:ftp://ftp.bar.example.com/pub/docs/foo.doc
   STATUS:CONFIRMED
   END:VEVENT
   END:VCALENDAR

4.2 Using Multipart Alternative for Low Fidelity Clients

   This example shows how a client can emit a multipart message that
   includes both a plain text version as well as the full iCalendar
   object.  Clients that do not support text/calendar will still be
   capable of rendering the plain text representation.

   From: foo1@example.com
   To: foo2@example.com
   Subject: Phone Conference
   Mime-Version: 1.0
   Content-Type: multipart/alternative;boundary="01BD3665.3AF0D360"

   --01BD3665.3AF0D360
   Content-Type: text/plain;charset=us-ascii



Melnikov (Ed.)               Standards Track           FORMFEED[Page 12]





RFC 2447bis                       iMIP                         June 2010


   Content-Transfer-Encoding: 7bit

   This is an alternative representation of a TEXT/CALENDAR MIME Object
   When: 7/1/1997 10:00AM PDT - 7/1/97 10:30AM PDT
   Where:
   Organizer: foo1@example.com
   Summary: Phone Conference

   --01BD3665.3AF0D360
   Content-Type: text/calendar; method=REQUEST; charset=US-ASCII
   Content-Transfer-Encoding: 7bit

   BEGIN:VCALENDAR
   PRODID:-//Example/ExampleCalendarClient//EN
   METHOD:REQUEST
   VERSION:2.0
   BEGIN:VEVENT
   ORGANIZER:mailto:foo1@example.com
   ATTENDEE;ROLE=CHAIR;PARTSTAT=ACCEPTED:mailto:foo1@example.com
   ATTENDEE;RSVP=YES;CUTYPE=INDIVIDUAL:mailto:foo2@example.com
   DTSTAMP:19970611T190000Z
   DTSTART:19970701T170000Z
   DTEND:19970701T173000Z
   SUMMARY:Phone Conference
   UID:calsvr.example.com-8739701987387771
   SEQUENCE:0
   STATUS:CONFIRMED
   END:VEVENT
   END:VCALENDAR

   --01BD3665.3AF0D360

4.3 Single Component With An ATTACH Property

   This example shows how a message containing an iCalendar object
   references an attached document. The reference is made using a
   Content-id (CID). Thus, the iCalendar object and the document are
   packaged in a multipart/related encapsulation.

   From: foo1@example.com
   To: foo2@example.com
   Subject: Phone Conference
   Mime-Version: 1.0
   Content-Type: multipart/related; boundary="boundary-example-1"

   --boundary-example-1

   Content-Type: text/calendar; method=REQUEST; charset=US-ASCII



Melnikov (Ed.)               Standards Track           FORMFEED[Page 13]





RFC 2447bis                       iMIP                         June 2010


   Content-Transfer-Encoding: 7bit
   Content-Disposition: attachment; filename="event.ics"

   BEGIN:VCALENDAR
   PRODID:-//Example/ExampleCalendarClient//EN
   METHOD:REQUEST
   VERSION:2.0
   BEGIN:VEVENT
   ORGANIZER:mailto:foo1@example.com
   ATTENDEE;ROLE=CHAIR;PARTSTAT=ACCEPTED:mailto:foo1@example.com
   ATTENDEE;RSVP=YES;CUTYPE=INDIVIDUAL:mailto:foo2@example.com
   DTSTAMP:19970611T190000Z
   DTSTART:19970701T180000Z
   DTEND:19970701T183000Z
   SUMMARY:Phone Conference
   UID:calsvr.example.com-8739701987387771
   ATTACH:cid:123456789@example.com
   SEQUENCE:0
   STATUS:CONFIRMED
   END:VEVENT
   END:VCALENDAR

   --boundary-example-1
   Content-Type: application/msword; name="FieldReport.doc"
   Content-Transfer-Encoding: base64
   Content-Disposition: inline; filename="FieldReport.doc"
   Content-ID: <123456789@example.com>

   0M8R4KGxGuEAAAAAAAAAAAAAAAAAAAAAPgADAP7/CQAGAAAAAAAAAAABAAAARAAAAAAA
   AAAAEAAAQAAAAAEAAAD+////AAAAAEUAAAD/////////////////////////////////
    ...

   --boundary-example-1--

4.4 Multiple Similar Components

   Multiple iCalendar components of the same type can be included in the
   iCalendar object when the METHOD is the same for each component.

   From: foo1@example.com
   To: foo2@example.com
   Subject: Summer Company Holidays
   Mime-Version: 1.0
   Content-Type: text/calendar; method=PUBLISH; charset=US-ASCII
   Content-Transfer-Encoding: 7bit
   Content-Disposition: attachment; filename="event.ics"





Melnikov (Ed.)               Standards Track           FORMFEED[Page 14]





RFC 2447bis                       iMIP                         June 2010


   BEGIN:VCALENDAR
   PRODID:-//Example/ExampleCalendarClient//EN
   METHOD:PUBLISH
   VERSION:2.0
   BEGIN:VEVENT
   ORGANIZER:MAILTO:FOO1@EXAMPLE.COM
   DTSTAMP:19970611T150000Z
   DTSTART:19970701T150000Z
   DTEND:19970701T230000Z
   SUMMARY:Company Picnic
   DESCRIPTION:Food and drink will be provided
   UID:CALSVR.EXAMPLE.COM-873970198738777-1
   SEQUENCE:0
   STATUS:CONFIRMED
   END:VEVENT
   BEGIN:VEVENT
   ORGANIZER:MAILTO:FOO1@EXAMPLE.COM
   DTSTAMP:19970611T190000Z
   DTSTART:19970715T150000Z
   DTEND:19970715T230000Z
   SUMMARY:Company Bowling Tournament
   DESCRIPTION:We have 10 lanes reserved
   UID:CALSVR.EXAMPLE.COM-873970198738777-2
   SEQUENCE:0
   STATUS:CONFIRMED
   END:VEVENT
   END:VCALENDAR

4.5 Multiple Mixed Components

   Different component types must be encapsulated in separate iCalendar
   objects.

   From: foo1@example.com
   To: foo2@example.com
   Subject: Phone Conference
   Mime-Version: 1.0
   Content-Type: multipart/mixed;boundary="--FEE3790DC7E35189CA67CE2C"

   This is a multi-part message in MIME format.

   ----FEE3790DC7E35189CA67CE2C
   Content-Type: text/calendar; method=REQUEST; charset=US-ASCII
   Content-Transfer-Encoding: 7bit
   Content-Disposition: attachment; filename="event1.ics"






Melnikov (Ed.)               Standards Track           FORMFEED[Page 15]





RFC 2447bis                       iMIP                         June 2010


   BEGIN:VCALENDAR
   PRODID:-//Example/ExampleCalendarClient//EN
   METHOD:REQUEST
   VERSION:2.0
   BEGIN:VEVENT
   ORGANIZER:mailto:foo1@example.com
   ATTENDEE;ROLE=CHAIR;PARTSTAT=ACCEPTED:mailto:foo1@example.com
   ATTENDEE;RSVP=YES;CUTYPE=INDIVIDUAL:mailto:foo2@example.com
   DTSTAMP:19970611T190000Z
   DTSTART:19970701T210000Z
   DTEND:19970701T230000Z
   SUMMARY:Phone Conference
   DESCRIPTION:Discuss what happened at the last meeting
   UID:calsvr.example.com-8739701987387772
   SEQUENCE:0
   STATUS:CONFIRMED
   END:VEVENT
   END:VCALENDAR

   ----FEE3790DC7E35189CA67CE2C
   Content-Type: text/calendar; method=REQUEST; charset=US-ASCII
   Content-Transfer-Encoding: 7bit
   Content-Disposition: attachment; filename="todo1.ics"

   BEGIN:VCALENDAR
   PRODID:-//Example/ExampleCalendarClient//EN
   METHOD:REQUEST
   VERSION:2.0
   BEGIN:VTODO
   DUE:19970701T160000Z
   ORGANIZER:mailto:foo1@example.com
   ATTENDEE;ROLE=CHAIR;PARTSTAT=ACCEPTED:mailto:foo1@example.com
   ATTENDEE;RSVP=YES:mailto:foo2@example.com
   SUMMARY:Phone Conference
   DESCRIPTION:Discuss a new location for the company picnic
   UID:calsvr.example.com-td-8739701987387773
   SEQUENCE:0
   STATUS:NEEDS-ACTION
   END:VEVENT
   END:VCALENDAR

   ----FEE3790DC7E35189CA67CE2C









Melnikov (Ed.)               Standards Track           FORMFEED[Page 16]





RFC 2447bis                       iMIP                         June 2010


4.6 Detailed Components With An ATTACH Property

   This example shows the format of a message containing a group meeting
   between three individuals. The multipart/related encapsulation is
   used because the iCalendar object contains an ATTACH property that
   uses a CID to reference the attachment.

   From: foo1@example.com
   MIME-Version: 1.0
   To: foo2@example.com,foo3@example.com
   Subject: REQUEST - Phone Conference
   Content-Type: multipart/related;boundary="--FEE3790DC7E35189CA67CE2C"

   ----FEE3790DC7E35189CA67CE2C
   Content-Type: multipart/alternative;
                 boundary="--00FEE3790DC7E35189CA67CE2C00"

   ----00FEE3790DC7E35189CA67CE2C00
   Content-Type: text/plain; charset=us-ascii
   Content-Transfer-Encoding: 7bit

   When: 7/1/1997 10:00PM PDT- 7/1/97 10:30 PM PDT
   Where:
   Organizer: foo1@example.com
   Summary: Let's discuss the attached document

   ----00FEE3790DC7E35189CA67CE2C00

   Content-Type: text/calendar; method=REQUEST; charset=US-ASCII;
                    Component=vevent
   Content-Transfer-Encoding: 7bit
   Content-Disposition: attachment; filename="event.ics"

   BEGIN:VCALENDAR
   PRODID:-//Example/ExampleCalendarClient//EN
   METHOD:REQUEST
   VERSION:2.0
   BEGIN:VEVENT
   ORGANIZER:foo1@example.com
   ATTENDEE;ROLE=CHAIR;PARTSTAT=ACCEPTED:foo1@example.com
   ATTENDEE;RSVP=YES;CUTYPE=INDIVIDUAL:mailto:foo2@example.com
   ATTENDEE;RSVP=YES;CUTYPE=INDIVIDUAL:mailto:foo3@example.com
   DTSTAMP:19970611T190000Z
   DTSTART:19970621T170000Z
   DTEND:199706211T173000Z
   SUMMARY:Let's discuss the attached document
   UID:calsvr.example.com-873970198738777-8aa
   ATTACH:cid:calsvr.example.com-12345aaa



Melnikov (Ed.)               Standards Track           FORMFEED[Page 17]





RFC 2447bis                       iMIP                         June 2010


   SEQUENCE:0
   STATUS:CONFIRMED
   END:VEVENT
   END:VCALENDAR

   ----00FEE3790DC7E35189CA67CE2C00

   ----FEE3790DC7E35189CA67CE2C
   Content-Type: application/msword; name="FieldReport.doc"
   Content-Transfer-Encoding: base64
   Content-Disposition: inline; filename="FieldReport.doc"
   Content-ID: <calsvr.example.com-12345aaa>


   R0lGODdhTAQZAJEAAFVVVd3d3e4AAP///ywAAAAATAQZAAAC/5yPOSLhD6OctNqLs94Xq
   AG4kiW5omm6sq27gvH8kzX9o1y+s73/g8MCofEovGITCoxKMbyCR16cNSq9YrNarfcrvd
   riIH5LL5jE6rxc3G+v2cguf0uv2Oz+v38L7/DxgoOKjURnjIIbe3yNjo+AgZWYVIWWl5i
   ZnJY6J
    ...

   ----FEE3790DC7E35189CA67CE2C

5 Recommended Practices

   This section outlines a series of recommended practices when using a
   messaging transport to exchange iCalendar objects.

5.1 Use of Content and Message IDs

   The [iCAL] specification makes frequent use of the URI for data types
   in properties such as "DESCRIPTION", "ATTACH", "CONTACT" and others.
   Two forms of URIs are Message ID (MID) and Content ID (CID). These
   are defined in [RFC-2392]. Although [RFC-2392] allows referencing
   messages or MIME body parts in other MIME entities or stores, it is
   strongly RECOMMENDED that iMIP implementations include all referenced
   messages and body parts in a single MIME entity. Simply put, if an
   iCalendar object contains CID or MID references to other messages or
   body parts, implementations should ensure that these messages and/or
   body parts are transmitted with the iCalendar object. If they are
   not, there is no guarantee that the receiving CUA will have the
   access or the authorization to view those objects.










Melnikov (Ed.)               Standards Track           FORMFEED[Page 18]





RFC 2447bis                       iMIP                         June 2010


6 IANA Considerations

   Registration of text/calendar MIME Media Type is done in [iCal].

   This document doesn't require any additional actions from IANA.

7 References

7.1 Normative References

   [iCAL]     Desruisseaux, B., (Ed.), "Internet Calendaring and
   Scheduling Core Object Specification (iCalendar)", RFC 5545.

   [iTIP]     Daboo, C., "iCalendar Transport-Independent
   Interoperability Protocol (iTIP)", RFC 5546.

   [RFC-5322] Resnick, P., "Internet Message Format", RFC 5322, October
   2008.

   [MAILTO] Hoffmann, P., Masinter, L., and J. Zawinski, "The mailto URL
   scheme", RFC 2368, June 1998.

   [RFC-1847] Galvin, J., Murphy, S., Crocker, S. and N. Freed,
   "Security Multiparts for MIME: Multipart/Signed and
   Multipart/Encrypted", RFC 1847, October 1995.

   [RFC-2045] Freed, N. and N. Borenstein, "Multipurpose Internet Mail
   Extensions (MIME) - Part One: Format of Internet Message Bodies", RFC
   2045, November 1996.

   [RFC-2046] Freed, N. and N. Borenstein, "Multipurpose Internet Mail
   Extensions (MIME) - Part Two: Media Types", RFC 2046, November 1996.

   [RFC-2392] Levinson, E., "Content-ID and Message-ID Uniform Resource
   Locators", RFC 2392, August 1998.

   [RFC-2119] Bradner, S., "Key words for use in RFCs to Indicate
   Requirement Levels", BCP 14, RFC 2119, March 1997.

   [UTF-8] Yergeau, F., "UTF-8, a transformation format of ISO 10646",
   STD 63, RFC 3629, November 2003.

7.2 Informative References

   [8BITMIME]   Klensin, J., Freed, N., Rose, M., Stefferud, E., and D.
   Crocker, "SMTP Service Extension for 8bit-MIMEtransport", RFC 1652,
   July 1994.




Melnikov (Ed.)               Standards Track           FORMFEED[Page 19]





RFC 2447bis                       iMIP                         June 2010


   [RFC-2047] Moore, K., "Multipurpose Internet Mail Extensions (MIME) -
   Part Three: Message Header Extensions for Non-ASCII Text", RFC 2047,
   November 1996.

   [RFC-2049] Freed, N. and N. Borenstein, "Multipurpose Internet Mail
   Extensions (MIME) Part Five: Conformance Criteria and Examples", RFC
   2049, November 1996.

   [RFC-3282] Alvestrand, H., "Content Language Headers", RFC 3282, May
   2002.









































Melnikov (Ed.)               Standards Track           FORMFEED[Page 20]





RFC 2447bis                       iMIP                         June 2010


8 Authors' Addresses

   Alexey Melnikov (editor)
   Isode Ltd
   5 Castle Business Village
   36 Station Road
   Hampton, Middlesex  TW12 2BX
   UK

   Email: Alexey.Melnikov@isode.com









































Melnikov (Ed.)               Standards Track           FORMFEED[Page 21]





RFC 2447bis                       iMIP                         June 2010


Appendix A.   Changes since RFC 2447.

   Updated references. Split them into Normative and Informative.

   Updated examples to use example.com/example.net domains.

   Corrected usage of RFC 2119 language.

   Clarified that charset=UTF-8 is required, unless the calendar can be
   entirely represented in US-ASCII.

   Clarified that 7-bit content transfer encodings should be used unless
   the calendar object is known to be transferred over 8-bit clean
   transport.

   Clarified that file extension specified in the Content-Disposition
   header field is not to be used to override the Content-Type MIME
   type.

   Disallow use of "multipart/alternative" for slightly different
   representations of the same calendar.

   Clarified handling of the "method" MIME parameter of the "Content-
   Type" header field.

   Clarified that in an iMIP message an ORGANIZER/ATTENDEE property
   contains a mailto: URI.

   Fixed examples with ATTENDEE property to use "CUTYPE=" instead of
   "TYPE=".

   Additional examples.

   Improved Security Considerations section.

   Multiple editorial changes to different sections of the document.

Appendix B.   Acknowledgements

   <<RFC Editor: feel free to move this section elsewhere.>>

   The editor of this document wish to thank Frank Dawson, Steve Mansour
   and Steve Silverberg, the original authors of RFC 2447, as well as
   the following individuals who have participated in the drafting,
   review and discussion of this memo:

   Reinhold Kainhofer, Cyrus Daboo, Bernard Desruisseaux, Eliot Lear,
   Peter Saint-Andre.



Melnikov (Ed.)               Standards Track           FORMFEED[Page 22]


